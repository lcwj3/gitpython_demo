{"c4fa1a9c0c920c05a9dcfed7f1a55534831db931": {"branch": "master", "message": "change get to post for semver servers\n", "new_file": {}, "del_file": {}, "mod_file": {"js/server.js": {"section_header": "var server=http.createServer(function(req,res){", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 72, "target_line_no": 72, "value": "      }\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 73, "target_line_no": 73, "value": "      res.end()\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 74, "target_line_no": 74, "value": "   }else if(pathname.indexOf(\"sort\")!=-1){\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 75, "target_line_no": null, "value": "       versionlist = JSON.parse(req.query['versionlist'])\n"}, {"diff_line_no": 16, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 76, "target_line_no": null, "value": "       res.end(sort_asc_versionlist(versionlist).toString())\n"}, {"diff_line_no": 17, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 75, "value": "       console.log(req.method)\n"}, {"diff_line_no": 18, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 76, "value": "       if (req.method == 'POST'){\n"}, {"diff_line_no": 19, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 77, "value": "           var data = ''\n"}, {"diff_line_no": 20, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 78, "value": "           req.on('data', function (chunk) {\n"}, {"diff_line_no": 21, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 79, "value": "               data += chunk\n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 80, "value": "           })\n"}, {"diff_line_no": 23, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 81, "value": "           req.on('end', function(){\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 82, "value": "               console.log(data)\n"}, {"diff_line_no": 25, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "               versionlist = JSON.parse(data)\n"}, {"diff_line_no": 26, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 84, "value": "               res.end(sort_asc_versionlist(versionlist).toString())\n"}, {"diff_line_no": 27, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 85, "value": "           })\n"}, {"diff_line_no": 28, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 86, "value": "       }\n"}, {"diff_line_no": 29, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 87, "value": "\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 77, "target_line_no": 88, "value": "   }\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 78, "target_line_no": 89, "value": "})\n"}, {"diff_line_no": 32, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 79, "target_line_no": 90, "value": "//\u76d1\u542c\u8fd9\u4e2a\u7aef\u53e3\n"}]}, "utils/useful_tools/format_js_api.py": {"section_header": "def sort_vers(versionlist, session):", "modified_lines": [{"diff_line_no": 47, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 59, "target_line_no": 59, "value": "\n"}, {"diff_line_no": 48, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 60, "target_line_no": 60, "value": "\n"}, {"diff_line_no": 49, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 61, "target_line_no": 61, "value": "def check_in_range(ver, range, session):\n"}, {"diff_line_no": 50, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "    if not range:\n"}, {"diff_line_no": 51, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "        return False\n"}, {"diff_line_no": 52, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 62, "target_line_no": 64, "value": "    has_session = True\n"}, {"diff_line_no": 53, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 63, "target_line_no": 65, "value": "    if session == None:\n"}, {"diff_line_no": 54, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 64, "target_line_no": 66, "value": "        session = requests.Session()"}]}}}, "351e27b50d84dd4e5aef5fc800561d6095bad75a": {"branch": "master", "message": "fix error\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "def thread_parser(platform, count, total_count, lib):", "modified_lines": [{"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 79, "target_line_no": 79, "value": "                    crawlerdb[platform.lower()], libinfo[1], libinfo[0], platform, session)\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 80, "value": "                dependencies = ''\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 81, "value": "                range = parse_dep_range(deplib, range, vendor, crawlerdb[platform.lower()], platform, session)\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 82, "value": "                satisfied_vers = []\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 82, "target_line_no": 83, "value": "                if sorted_vers:\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 83, "target_line_no": 84, "value": "                    for sver in sorted_vers:\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 84, "target_line_no": 85, "value": "                        if check_version_in_range(sver, range, platform, session):\n"}, {"diff_line_no": 28, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 86, "value": "                            satisfied_vers.append(sver)\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 85, "target_line_no": 87, "value": "                            if not dependencies:\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 86, "target_line_no": 88, "value": "                                dependencies += sver\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 87, "target_line_no": 89, "value": "                            else:\n"}, {"diff_line_no": 32, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 88, "target_line_no": 90, "value": "                                dependencies += '|' + sver\n"}, {"diff_line_no": 33, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 89, "target_line_no": null, "value": "                deps[deplibvendor]['sorted_versions'] = sorted_vers\n"}, {"diff_line_no": 34, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 90, "target_line_no": null, "value": "                graph_deps.insert({'key': deplibvendor + '--->' + range, 'version_list': sorted_vers, 'version_string': dependencies})\n"}, {"diff_line_no": 35, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 91, "value": "                deps[deplibvendor]['sorted_versions'] = satisfied_vers\n"}, {"diff_line_no": 36, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 92, "value": "                graph_deps.insert({'key': deplibvendor + '--->' + range, 'version_list': satisfied_vers, 'version_string': dependencies})\n"}, {"diff_line_no": 37, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 91, "target_line_no": 93, "value": "                ver['dependencies'][deplibvendor] = dependencies\n"}, {"diff_line_no": 38, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 92, "target_line_no": 94, "value": "            graph_vers.update({'library':lib['library'], 'vendor': lib['vendor'], 'platform': platform, 'version': ver['version']},\n"}, {"diff_line_no": 39, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 93, "target_line_no": 95, "value": "                              {'$set': {'dependencies': deps}})"}]}}}, "3daa8081319a47e43f31ea6c5917880f74dd170e": {"branch": "master", "message": "fix error\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 131, "target_line_no": 131, "value": "               parsing_new_lvs.append(new_lv)\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 132, "target_line_no": 132, "value": "    else:\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 133, "target_line_no": 133, "value": "        parsing_new_lvs = new_libvers\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 134, "target_line_no": null, "value": "    with concurrent.futures.ProcessPoolExecutor(max_workers=8) as executor:\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 134, "value": "    with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 135, "target_line_no": 135, "value": "        future_name = {executor.submit(thread_parser, platform,new_libvers.index(file), len(new_libvers), file): file for file in parsing_new_lvs}\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 136, "target_line_no": 136, "value": "        for future in concurrent.futures.as_completed(future_name):\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 137, "target_line_no": 137, "value": "            new_lib_vers_total += future.result()"}]}}}, "8b2a2a9f1f01d133c9738d6ba1dbf65c4acf5118": {"branch": "master", "message": "fix error\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "def thread_parser(platform, count, total_count, lib):", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 60, "target_line_no": 60, "value": "            ver['dependencyrange'] = depranges\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 61, "target_line_no": 61, "value": "            ver['dependencies'] = {}\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 62, "target_line_no": 62, "value": "            for deplibvendor, range in ranges.items():\n"}, {"diff_line_no": 15, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "                range = range['version_ranges']\n"}, {"diff_line_no": 16, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 63, "target_line_no": 64, "value": "                depcombo = graph_deps.find_one({'key': deplibvendor + '--->' + range})\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 64, "target_line_no": 65, "value": "                if depcombo:\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 65, "target_line_no": 66, "value": "                    deps[deplibvendor]['sorted_versions'] = depcombo['version_list']\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 66, "target_line_no": 67, "value": "                    ver['dependencies'][deplibvendor] = depcombo['version_string']\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 67, "target_line_no": 68, "value": "                    continue\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 68, "target_line_no": null, "value": "                range = range['version_ranges']\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 69, "target_line_no": 69, "value": "                deplib = deplibvendor\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 70, "target_line_no": 70, "value": "                vendor = ''\n"}, {"diff_line_no": 24, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 71, "target_line_no": 71, "value": "                if ':' in deplibvendor:"}]}}}, "9c58f515c0ad59e3ebe87388df86cfae1809e738": {"branch": "master", "message": "add cache in mongodb\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):", "modified_lines": [{"diff_line_no": 49, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 137, "target_line_no": 144, "value": "    incremental_add(new_lib_vers_total)\n"}, {"diff_line_no": 50, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 138, "target_line_no": 145, "value": "    print('incremental updated')\n"}, {"diff_line_no": 51, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 139, "target_line_no": 146, "value": "    graph_temp.remove()\n"}, {"diff_line_no": 52, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 147, "value": "    graph_depends.remove()\n"}, {"diff_line_no": 53, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 140, "target_line_no": 148, "value": "    # for clean all updated libs and vers status, comment this to keep test data from been deleted\n"}, {"diff_line_no": 54, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 141, "target_line_no": 149, "value": "    # for lib in updated_libs:\n"}, {"diff_line_no": 55, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 142, "target_line_no": 150, "value": "    #     graph_libraries.update_one(lib, {'$set': {'is_updated': False}})"}]}}}, "baf6a177f25da41228c71bf5e7aa447b32aa0d00": {"branch": "master", "message": "fix bug\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 105, "target_line_no": 105, "value": "            if not libinfo:\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 106, "target_line_no": 106, "value": "                print(f'Library {ver[\"library\"]} does not exist!')\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 107, "target_line_no": 107, "value": "                continue\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 108, "target_line_no": null, "value": "            dist_tags = libinfo['dist-tags']\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 108, "value": "            dist_tags = {}\n"}, {"diff_line_no": 17, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 109, "value": "            if 'dist-tags' in libinfo:\n"}, {"diff_line_no": 18, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 110, "value": "                dist_tags = libinfo['dist-tags']\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 109, "target_line_no": 111, "value": "            libvers[ver['library']] = {\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 110, "target_line_no": 112, "value": "                'library': ver['library'],\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 111, "target_line_no": 113, "value": "                'vendor': ver['vendor'],"}]}}}, "713049d3cc5046d66cae96ed5afa606355bf5ff9": {"branch": "master", "message": "add new versions\n", "new_file": {}, "del_file": {}, "mod_file": {"Config/configuration.ini": {"section_header": "DB = cvetriage", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "User = secbug\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "Password = fgyu7RE0\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 7, "value": "[Mongodb]\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 8, "target_line_no": null, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 9, "value": "Port = 27019\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 13, "target_line_no": 13, "value": "DB = library-crawler\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 17, "value": "User = neo4j\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 18, "value": "Password = 1234\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 19, "value": "[InternalIP]\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 20, "target_line_no": null, "value": "IP = localhost\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 31, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "IP = 192.168.1.10\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "incrementalimport/graph_operation/create_graph.py": {"section_header": "def get_version_numbers(libraryid):", "modified_lines": [{"diff_line_no": 47, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 66, "target_line_no": 66, "value": "\n"}, {"diff_line_no": 48, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 67, "target_line_no": 67, "value": "def create_version_node(version):\n"}, {"diff_line_no": 49, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 68, "target_line_no": 68, "value": "    if not version_exists(version['versionId']):\n"}, {"diff_line_no": 50, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 69, "target_line_no": null, "value": "        graph.run(f'''MERGE(a: Version {{version: '{version['version']}',vendor: '{version['vendor']}', major: '{version['major']}', minor: '{version['minor']}', \n"}, {"diff_line_no": 51, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 69, "value": "        graph.run(f'''MERGE(a: Version {{version: '{version['version']}', major: '{version['major']}', minor: '{version['minor']}', \n"}, {"diff_line_no": 52, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 70, "target_line_no": 70, "value": "        patch: '{version['patch']}', pre_release: '{version['pre_release']}', pre_release_weight: '{version['pre_release_weight']}', \n"}, {"diff_line_no": 53, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 71, "target_line_no": 71, "value": "        library: '{version['library']}', platform: '{version['platform']}', \n"}, {"diff_line_no": 54, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 72, "target_line_no": 72, "value": "        versionId: '{version['versionId']}'}})''')\n"}]}, "incrementalimport/graph_operation/incremental_import.py": {"section_header": "def incremental_add(libvers):", "modified_lines": [{"diff_line_no": 140, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 160, "target_line_no": 160, "value": "                    sorted_version_list = versionlist\n"}, {"diff_line_no": 141, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 161, "target_line_no": 161, "value": "                else:\n"}, {"diff_line_no": 142, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 162, "target_line_no": 162, "value": "                    sorted_version_list = sort_versions(versionlist, ver['platform'], None)\n"}, {"diff_line_no": 143, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 163, "target_line_no": null, "value": "                create_ver_ver_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 144, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 164, "target_line_no": null, "value": "                                            dependlib + ':' + sorted_version_list[-1] + ':' + ver['vendor'] + ':' + ver['platform'], 'DEFAULT')\n"}, {"diff_line_no": 145, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 165, "target_line_no": null, "value": "                create_ver_lib_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 146, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 166, "target_line_no": null, "value": "                                            dependlib + ':' + ver['vendor'] + ':' + ver['platform'], dependverlist, ver['dependencyrange'][dependlibvendor])\n"}, {"diff_line_no": 147, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 163, "value": "                create_ver_ver_relationship(ver['library'] + ':' + ver['version'] + ':' + ':' + ver['platform'],\n"}, {"diff_line_no": 148, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 164, "value": "                                            dependlib + ':' + sorted_version_list[-1] + ':' + ':' + ver['platform'], 'DEFAULT')\n"}, {"diff_line_no": 149, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 165, "value": "                create_ver_lib_relationship(ver['library'] + ':' + ver['version'] + ':' + ':' + ver['platform'],\n"}, {"diff_line_no": 150, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 166, "value": "                                            dependlib + ':' + ':' + ver['platform'], dependverlist, ver['dependencyrange'][dependlibvendor])\n"}, {"diff_line_no": 151, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 167, "target_line_no": 167, "value": "        for deplib in libdependslist:\n"}, {"diff_line_no": 152, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 168, "target_line_no": null, "value": "            create_lib_lib_relationship(lib['library'] + ':' + ver['vendor'] + ':' +\n"}, {"diff_line_no": 153, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 169, "target_line_no": null, "value": "                                        lib['platform'], deplib + ':' + ver['vendor'] + ':' + lib['platform'])\n"}, {"diff_line_no": 154, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 168, "value": "            create_lib_lib_relationship(lib['library'] + ':' + ':' +\n"}, {"diff_line_no": 155, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 169, "value": "                                        lib['platform'], deplib + ':' + ':' + lib['platform'])\n"}, {"diff_line_no": 156, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 170, "target_line_no": 170, "value": "\n"}, {"diff_line_no": 157, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 171, "target_line_no": 171, "value": "\n"}, {"diff_line_no": 158, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 172, "target_line_no": 172, "value": "def remove_vul_vers(removed_vul_ver_mappings, platform):\n"}]}, "incrementalimport/import_graph_from_mongodb.py": {"section_header": "c = pymongo.MongoClient(MONGO_HOST, username=MONGO_USER,", "modified_lines": [{"diff_line_no": 164, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 22, "target_line_no": 22, "value": "crawl = c[MONGO_DB]\n"}, {"diff_line_no": 165, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 23, "target_line_no": 23, "value": "graph_libraries = crawl['graph_libraries']\n"}, {"diff_line_no": 166, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 24, "target_line_no": 24, "value": "graph_versions = crawl['graph_versions']\n"}, {"diff_line_no": 167, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 25, "target_line_no": null, "value": "limit = 100\n"}, {"diff_line_no": 168, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 26, "target_line_no": 25, "value": "\n"}, {"diff_line_no": 169, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 27, "target_line_no": null, "value": "def thread_parser(platform, skip):\n"}, {"diff_line_no": 170, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 26, "value": "def thread_parser(platform, count, total_count, lib):\n"}, {"diff_line_no": 171, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 27, "value": "    ct = pymongo.MongoClient(MONGO_HOST, username=MONGO_USER,\n"}, {"diff_line_no": 172, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 28, "value": "                            password=MONGO_PWD, port=MONGO_PORT, authSource=MONGO_AUTH)\n"}, {"diff_line_no": 173, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 29, "value": "    crawlerdb = ct[MONGO_DB]\n"}, {"diff_line_no": 174, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 31, "target_line_no": 30, "value": "    graph_libs = crawlerdb['graph_libraries']\n"}, {"diff_line_no": 175, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 32, "target_line_no": 31, "value": "    graph_vers = crawlerdb['graph_versions']\n"}, {"diff_line_no": 176, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 33, "target_line_no": 32, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 177, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 34, "target_line_no": null, "value": "    total_count = new_libs.count()\n"}, {"diff_line_no": 178, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 35, "target_line_no": 33, "value": "    new_lib_vers = []\n"}, {"diff_line_no": 179, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 36, "target_line_no": null, "value": "    count = 0\n"}, {"diff_line_no": 180, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 37, "target_line_no": null, "value": "    skip = skip * limit\n"}, {"diff_line_no": 181, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 38, "target_line_no": 34, "value": "    with requests.Session() as session:\n"}, {"diff_line_no": 182, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 39, "target_line_no": null, "value": "        for lib in new_libs.skip(skip).limit(limit):\n"}, {"diff_line_no": 183, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 40, "target_line_no": null, "value": "            count += 1\n"}, {"diff_line_no": 184, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 41, "target_line_no": null, "value": "            print(count + skip, total_count, lib['library'])\n"}, {"diff_line_no": 185, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 42, "target_line_no": null, "value": "            sorted_versions = get_sorted_all_version(\n"}, {"diff_line_no": 186, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 43, "target_line_no": null, "value": "                crawlerdb[str(platform.lower())], lib['library'], lib['vendor'], platform, session)\n"}, {"diff_line_no": 187, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 44, "target_line_no": null, "value": "            oldest = ''\n"}, {"diff_line_no": 188, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 45, "target_line_no": null, "value": "            latest = ''\n"}, {"diff_line_no": 189, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 46, "target_line_no": null, "value": "            if sorted_versions:\n"}, {"diff_line_no": 190, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 47, "target_line_no": null, "value": "                oldest = sorted_versions[0]\n"}, {"diff_line_no": 191, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 48, "target_line_no": null, "value": "                latest = sorted_versions[-1]\n"}, {"diff_line_no": 192, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 49, "target_line_no": null, "value": "            library = {\n"}, {"diff_line_no": 193, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 50, "target_line_no": null, "value": "                'library': lib['library'],\n"}, {"diff_line_no": 194, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 51, "target_line_no": null, "value": "                'vendor': lib['vendor'],\n"}, {"diff_line_no": 195, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 52, "target_line_no": null, "value": "                'platform': lib['platform'],\n"}, {"diff_line_no": 196, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 53, "target_line_no": null, "value": "                'dist_tags': json.dumps(lib['dist_tags']) if 'dist_tags' in lib and lib['dist_tags'] else {},\n"}, {"diff_line_no": 197, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 54, "target_line_no": null, "value": "                'oldest': oldest,\n"}, {"diff_line_no": 198, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 55, "target_line_no": null, "value": "                'latest': latest\n"}, {"diff_line_no": 199, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 56, "target_line_no": null, "value": "            }\n"}, {"diff_line_no": 200, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 57, "target_line_no": null, "value": "            versions = list(graph_vers.find(\n"}, {"diff_line_no": 201, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 58, "target_line_no": null, "value": "                {'library': lib['library'], 'vendor': lib['vendor'], 'platform': lib['platform'], 'is_updated': True}))\n"}, {"diff_line_no": 202, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "        print(count, total_count, lib['library'])\n"}, {"diff_line_no": 203, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 36, "value": "        sorted_versions = get_sorted_all_version(\n"}, {"diff_line_no": 204, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 37, "value": "            crawlerdb[str(platform.lower())], lib['library'], lib['vendor'], platform, session)\n"}, {"diff_line_no": 205, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "        oldest = ''\n"}, {"diff_line_no": 206, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "        latest = ''\n"}, {"diff_line_no": 207, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "        if sorted_versions:\n"}, {"diff_line_no": 208, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 41, "value": "            oldest = sorted_versions[0]\n"}, {"diff_line_no": 209, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "            latest = sorted_versions[-1]\n"}, {"diff_line_no": 210, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "        library = {\n"}, {"diff_line_no": 211, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "            'library': lib['library'],\n"}, {"diff_line_no": 212, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "            'vendor': lib['vendor'],\n"}, {"diff_line_no": 213, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 46, "value": "            'platform': lib['platform'],\n"}, {"diff_line_no": 214, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "            'dist_tags': json.dumps(lib['dist_tags']) if 'dist_tags' in lib and lib['dist_tags'] else {},\n"}, {"diff_line_no": 215, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "            'oldest': oldest,\n"}, {"diff_line_no": 216, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "            'latest': latest\n"}, {"diff_line_no": 217, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "        }\n"}, {"diff_line_no": 218, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "        versions = list(graph_vers.find(\n"}, {"diff_line_no": 219, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "            {'library': lib['library'], 'vendor': lib['vendor'], 'platform': lib['platform'], 'is_updated': True}))\n"}, {"diff_line_no": 220, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 59, "target_line_no": 53, "value": "\n"}, {"diff_line_no": 221, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 60, "target_line_no": null, "value": "            for ver in versions:\n"}, {"diff_line_no": 222, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 61, "target_line_no": null, "value": "                ranges = ver['dependencies']\n"}, {"diff_line_no": 223, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 62, "target_line_no": null, "value": "                deps = ranges\n"}, {"diff_line_no": 224, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 63, "target_line_no": null, "value": "                ver['dependencyrange'] = ver['dependencies']\n"}, {"diff_line_no": 225, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 64, "target_line_no": null, "value": "                ver['dependencies'] = {}\n"}, {"diff_line_no": 226, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 65, "target_line_no": null, "value": "                for deplibvendor, range in ranges.items():\n"}, {"diff_line_no": 227, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 66, "target_line_no": null, "value": "                    range = range['version_ranges']\n"}, {"diff_line_no": 228, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 67, "target_line_no": null, "value": "                    deplib = deplibvendor\n"}, {"diff_line_no": 229, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 68, "target_line_no": null, "value": "                    vendor = ''\n"}, {"diff_line_no": 230, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 69, "target_line_no": null, "value": "                    if ':' in deplibvendor:\n"}, {"diff_line_no": 231, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 70, "target_line_no": null, "value": "                        libinfo = deplibvendor.split(':')\n"}, {"diff_line_no": 232, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 71, "target_line_no": null, "value": "                        deplib = libinfo[1]\n"}, {"diff_line_no": 233, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 72, "target_line_no": null, "value": "                        vendor = libinfo[0]\n"}, {"diff_line_no": 234, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 73, "target_line_no": null, "value": "                    if not crawlerdb[platform.lower()].find_one({'requested_name': deplib}):\n"}, {"diff_line_no": 235, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 74, "target_line_no": null, "value": "                        print(f'unable to find library:{lib[\"library\"]}-{ver[\"version\"]}-->{deplib}-{range}')\n"}, {"diff_line_no": 236, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 75, "target_line_no": null, "value": "                        continue\n"}, {"diff_line_no": 237, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 76, "target_line_no": null, "value": "                    sorted_vers = get_sorted_all_version(\n"}, {"diff_line_no": 238, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "                        crawlerdb[platform.lower()], libinfo[1], libinfo[0], platform, session)\n"}, {"diff_line_no": 239, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "                    dependencies = ''\n"}, {"diff_line_no": 240, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 79, "target_line_no": null, "value": "                    range = parse_dep_range(deplib, range, vendor, crawlerdb[platform.lower()], platform, session)\n"}, {"diff_line_no": 241, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 80, "target_line_no": null, "value": "                    if sorted_vers:\n"}, {"diff_line_no": 242, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 81, "target_line_no": null, "value": "                        for sver in sorted_vers:\n"}, {"diff_line_no": 243, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 82, "target_line_no": null, "value": "                            if check_version_in_range(sver, range, platform, session):\n"}, {"diff_line_no": 244, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 83, "target_line_no": null, "value": "                                if not dependencies:\n"}, {"diff_line_no": 245, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 84, "target_line_no": null, "value": "                                    dependencies += sver\n"}, {"diff_line_no": 246, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 85, "target_line_no": null, "value": "                                else:\n"}, {"diff_line_no": 247, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 86, "target_line_no": null, "value": "                                    dependencies += '|' + sver\n"}, {"diff_line_no": 248, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 87, "target_line_no": null, "value": "                    deps[deplibvendor]['sorted_versions'] = sorted_vers\n"}, {"diff_line_no": 249, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 88, "target_line_no": null, "value": "                    ver['dependencies'][deplibvendor] = dependencies\n"}, {"diff_line_no": 250, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 89, "target_line_no": null, "value": "                graph_vers.update({'library':lib['library'], 'vendor': lib['vendor'], 'platform': platform, 'version': ver['version']},\n"}, {"diff_line_no": 251, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 90, "target_line_no": null, "value": "                                  {'$set': {'dependencies': deps}})\n"}, {"diff_line_no": 252, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 91, "target_line_no": null, "value": "            library['versions'] = versions\n"}, {"diff_line_no": 253, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 92, "target_line_no": null, "value": "            new_lib_vers.append(library)\n"}, {"diff_line_no": 254, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 54, "value": "        for ver in versions:\n"}, {"diff_line_no": 255, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 55, "value": "            ranges = ver['dependencies']\n"}, {"diff_line_no": 256, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "            deps = ranges\n"}, {"diff_line_no": 257, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "            depranges = {}\n"}, {"diff_line_no": 258, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "            for dl, dr in deps.items():\n"}, {"diff_line_no": 259, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 59, "value": "                depranges[dl] = dr['version_ranges']\n"}, {"diff_line_no": 260, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 60, "value": "            ver['dependencyrange'] = depranges\n"}, {"diff_line_no": 261, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "            ver['dependencies'] = {}\n"}, {"diff_line_no": 262, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "            for deplibvendor, range in ranges.items():\n"}, {"diff_line_no": 263, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "                range = range['version_ranges']\n"}, {"diff_line_no": 264, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 64, "value": "                deplib = deplibvendor\n"}, {"diff_line_no": 265, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 65, "value": "                vendor = ''\n"}, {"diff_line_no": 266, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "                if ':' in deplibvendor:\n"}, {"diff_line_no": 267, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "                    libinfo = deplibvendor.split(':')\n"}, {"diff_line_no": 268, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "                    deplib = libinfo[1]\n"}, {"diff_line_no": 269, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 69, "value": "                    vendor = libinfo[0]\n"}, {"diff_line_no": 270, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 70, "value": "                if not crawlerdb[platform.lower()].find_one({'requested_name': deplib}):\n"}, {"diff_line_no": 271, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 71, "value": "                    print(f'unable to find library:{lib[\"library\"]}-{ver[\"version\"]}-->{deplib}-{range}')\n"}, {"diff_line_no": 272, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 72, "value": "                    continue\n"}, {"diff_line_no": 273, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 73, "value": "                sorted_vers = get_sorted_all_version(\n"}, {"diff_line_no": 274, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 74, "value": "                    crawlerdb[platform.lower()], libinfo[1], libinfo[0], platform, session)\n"}, {"diff_line_no": 275, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 75, "value": "                dependencies = ''\n"}, {"diff_line_no": 276, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 76, "value": "                range = parse_dep_range(deplib, range, vendor, crawlerdb[platform.lower()], platform, session)\n"}, {"diff_line_no": 277, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 77, "value": "                if sorted_vers:\n"}, {"diff_line_no": 278, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 78, "value": "                    for sver in sorted_vers:\n"}, {"diff_line_no": 279, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 79, "value": "                        if check_version_in_range(sver, range, platform, session):\n"}, {"diff_line_no": 280, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 80, "value": "                            if not dependencies:\n"}, {"diff_line_no": 281, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 81, "value": "                                dependencies += sver\n"}, {"diff_line_no": 282, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 82, "value": "                            else:\n"}, {"diff_line_no": 283, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "                                dependencies += '|' + sver\n"}, {"diff_line_no": 284, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 84, "value": "                deps[deplibvendor]['sorted_versions'] = sorted_vers\n"}, {"diff_line_no": 285, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 85, "value": "                ver['dependencies'][deplibvendor] = dependencies\n"}, {"diff_line_no": 286, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 86, "value": "            graph_vers.update({'library':lib['library'], 'vendor': lib['vendor'], 'platform': platform, 'version': ver['version']},\n"}, {"diff_line_no": 287, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 87, "value": "                              {'$set': {'dependencies': deps}})\n"}, {"diff_line_no": 288, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 88, "value": "        library['versions'] = versions\n"}, {"diff_line_no": 289, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 89, "value": "        new_lib_vers.append(library)\n"}, {"diff_line_no": 290, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 93, "target_line_no": 90, "value": "    return new_lib_vers\n"}, {"diff_line_no": 291, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 94, "target_line_no": 91, "value": "\n"}, {"diff_line_no": 292, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 92, "value": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):\n"}, {"diff_line_no": 293, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 93, "value": "    new_lib_vers_total = []\n"}, {"diff_line_no": 294, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 94, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 295, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 98, "target_line_no": null, "value": "    total_count = new_libs.count()\n"}, {"diff_line_no": 296, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "    new_vers = graph_vers.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 297, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 96, "value": "    libvers = {}\n"}, {"diff_line_no": 298, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 99, "target_line_no": 97, "value": "    count = 0\n"}, {"diff_line_no": 299, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 100, "target_line_no": null, "value": "    skipcount = int(total_count / limit) + 1\n"}, {"diff_line_no": 300, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 101, "target_line_no": null, "value": "\n"}, {"diff_line_no": 301, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 102, "target_line_no": null, "value": "\n"}, {"diff_line_no": 302, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 103, "target_line_no": null, "value": "    with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:\n"}, {"diff_line_no": 303, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 104, "target_line_no": null, "value": "        future_name = {executor.submit(thread_parser, platform, file): file for file in range(skipcount)}\n"}, {"diff_line_no": 304, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    for ver in new_vers:\n"}, {"diff_line_no": 305, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "        print(count)\n"}, {"diff_line_no": 306, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 100, "value": "        count += 1\n"}, {"diff_line_no": 307, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 101, "value": "        if ver['library'] in libvers:\n"}, {"diff_line_no": 308, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 102, "value": "            libvers[ver['library']]['sorted_versions'].append(ver)\n"}, {"diff_line_no": 309, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 103, "value": "        else:\n"}, {"diff_line_no": 310, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 104, "value": "            libinfo = crawl[str(platform.lower())].find_one({'requested_name': ver['library']})\n"}, {"diff_line_no": 311, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 105, "value": "            if not libinfo:\n"}, {"diff_line_no": 312, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 106, "value": "                print(f'Library {ver[\"library\"]} does not exist!')\n"}, {"diff_line_no": 313, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 107, "value": "                continue\n"}, {"diff_line_no": 314, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 108, "value": "            dist_tags = libinfo['dist-tags']\n"}, {"diff_line_no": 315, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 109, "value": "            libvers[ver['library']] = {\n"}, {"diff_line_no": 316, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 110, "value": "                'library': ver['library'],\n"}, {"diff_line_no": 317, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 111, "value": "                'vendor': ver['vendor'],\n"}, {"diff_line_no": 318, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 112, "value": "                'platform': ver['platform'],\n"}, {"diff_line_no": 319, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 113, "value": "                'dist_tags': dist_tags,\n"}, {"diff_line_no": 320, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 114, "value": "                'sorted_versions': []\n"}, {"diff_line_no": 321, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 115, "value": "            }\n"}, {"diff_line_no": 322, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 116, "value": "    new_libvers = list(libvers.values())\n"}, {"diff_line_no": 323, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 117, "value": "    graph_temp = crawl['graph_temp']\n"}, {"diff_line_no": 324, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 118, "value": "    parsing_new_lvs = []\n"}, {"diff_line_no": 325, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 119, "value": "    if graph_temp.count() > 0:\n"}, {"diff_line_no": 326, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 120, "value": "        for new_lv in new_libvers:\n"}, {"diff_line_no": 327, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 121, "value": "            if not graph_temp.find_one({'requested_name': new_lv['library']}):\n"}, {"diff_line_no": 328, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 122, "value": "               parsing_new_lvs.append(new_lv)\n"}, {"diff_line_no": 329, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 123, "value": "    else:\n"}, {"diff_line_no": 330, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 124, "value": "        parsing_new_lvs = new_libvers\n"}, {"diff_line_no": 331, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 125, "value": "    with concurrent.futures.ProcessPoolExecutor(max_workers=8) as executor:\n"}, {"diff_line_no": 332, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 126, "value": "        future_name = {executor.submit(thread_parser, platform,new_libvers.index(file), len(new_libvers), file): file for file in parsing_new_lvs}\n"}, {"diff_line_no": 333, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 105, "target_line_no": 127, "value": "        for future in concurrent.futures.as_completed(future_name):\n"}, {"diff_line_no": 334, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 106, "target_line_no": 128, "value": "            new_lib_vers_total += future.result()\n"}, {"diff_line_no": 335, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 107, "target_line_no": 129, "value": "    create_library_id(new_lib_vers_total)\n"}, {"diff_line_no": 336, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 108, "target_line_no": 130, "value": "    for vers in new_lib_vers_total:\n"}, {"diff_line_no": 337, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 109, "target_line_no": 131, "value": "        create_version_id(vers['versions'])\n"}, {"diff_line_no": 338, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 110, "target_line_no": 132, "value": "    print('id created')\n"}, {"diff_line_no": 339, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 133, "value": "    for a in new_lib_vers_total:\n"}, {"diff_line_no": 340, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 134, "value": "        graph_temp.insert(a, check_keys=False)\n"}, {"diff_line_no": 341, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 111, "target_line_no": 135, "value": "    incremental_add(new_lib_vers_total)\n"}, {"diff_line_no": 342, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 112, "target_line_no": 136, "value": "    print('incremental updated')\n"}, {"diff_line_no": 343, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 137, "value": "    graph_temp.remove()\n"}, {"diff_line_no": 344, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 113, "target_line_no": 138, "value": "    # for clean all updated libs and vers status, comment this to keep test data from been deleted\n"}, {"diff_line_no": 345, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 114, "target_line_no": 139, "value": "    # for lib in updated_libs:\n"}, {"diff_line_no": 346, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 115, "target_line_no": 140, "value": "    #     graph_libraries.update_one(lib, {'$set': {'is_updated': False}})\n"}]}, "js/server.js": {"section_header": "function check_range_type(name, versionrange){", "modified_lines": [{"diff_line_no": 352, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 23, "target_line_no": 23, "value": "function sort_asc_versionlist(versionlist){\n"}, {"diff_line_no": 353, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 24, "target_line_no": 24, "value": "    var res = []\n"}, {"diff_line_no": 354, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 25, "target_line_no": 25, "value": "    try{\n"}, {"diff_line_no": 355, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 26, "target_line_no": null, "value": "        res = versionlist.sort(function(a, b){return semver.gt(a, b)})\n"}, {"diff_line_no": 356, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 26, "value": "        res = versionlist.sort(function(a, b){\n"}, {"diff_line_no": 357, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "            if (semver.gt(a, b))\n"}, {"diff_line_no": 358, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 28, "value": "                return 1\n"}, {"diff_line_no": 359, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 29, "value": "            else\n"}, {"diff_line_no": 360, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "                return -1\n"}, {"diff_line_no": 361, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "        })\n"}, {"diff_line_no": 362, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 27, "target_line_no": 32, "value": "    }catch(err){\n"}, {"diff_line_no": 363, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 33, "value": "\n"}, {"diff_line_no": 364, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 34, "value": "    }"}]}}}, "93058012b3b22aca44c3fd9c92daa1a3ce332cff": {"branch": "master", "message": "fix params error\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/graph_operation/incremental_import.py": {"section_header": "def adjust_default(ver, lowerid):", "modified_lines": [{"diff_line_no": 33, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 79, "target_line_no": 77, "value": "        rel = r['r']\n"}, {"diff_line_no": 34, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 78, "value": "        depends = graph.run(f'''match (x:Version {{vendor: '{src['vendor']}', library: '{src['library']}', version: '{src['version']}', platform: '{src['platform']}'}})-[r:DEPENDS]->(y:Library {{vendor: '{ver['vendor']}', library: '{ver['library']}', platform: '{ver['platform']}'}})\n"}, {"diff_line_no": 35, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 79, "value": "            return r, y''').data()\n"}, {"diff_line_no": 36, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 82, "target_line_no": null, "value": "        if not depend:\n"}, {"diff_line_no": 37, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 80, "value": "        if not depends:\n"}, {"diff_line_no": 38, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 83, "target_line_no": 81, "value": "            return\n"}, {"diff_line_no": 39, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 84, "target_line_no": 82, "value": "        dependsrel = list(depends)[0]['r']\n"}, {"diff_line_no": 40, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 85, "target_line_no": 83, "value": "        version_range = dependsrel['version_range']"}]}}}, "0b86474b92df995f4d08226a0474d7defac874fb": {"branch": "master", "message": "modify condig\n", "new_file": {}, "del_file": {}, "mod_file": {"Config/configuration.ini": {"section_header": "Port = 27019", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "DB = test2\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "DB = library-crawler\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 15, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687"}]}}}, "626f5d600c6cfd9835bc37a20c8ae0907fada104": {"branch": "master", "message": "Merge branch 'temp'\n", "new_file": {}, "del_file": {}, "mod_file": {}}, "624e07275296dca187ed931e4f6acca438a3c0ad": {"branch": "master", "message": "modify mongodb structure, adding sorted_version in dependencies in graph_versions\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/graph_operation/incremental_import.py": {"section_header": "def connect_upper_lower(lib, ver):", "modified_lines": [{"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 67, "target_line_no": 69, "value": "        if (ver['version'] not in versionlist) and check_version_in_range(ver['version'], versionrange, ver['platform']):\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 68, "target_line_no": 70, "value": "            update_depends_property(r['x']['versionId'], lib['library'] + ':' + lib['vendor'] +\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 69, "target_line_no": 71, "value": "                                    ':' + lib['platform'], versions + '|' + ver['version'], versionrange)\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 70, "target_line_no": null, "value": "\n"}, {"diff_line_no": 31, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 72, "value": "            feedback_graph_versions(r['x']['library'], r['x']['version'], r['x']['vendor'], r['x']['platform'], ver['vendor'] + ':' + ver['library'], ver['version'])\n"}, {"diff_line_no": 32, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 71, "target_line_no": 73, "value": "\n"}, {"diff_line_no": 33, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 72, "target_line_no": 74, "value": "def adjust_default(ver, lowerid):\n"}, {"diff_line_no": 34, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 73, "target_line_no": 75, "value": "    relationships = graph.run(\n"}]}, "incrementalimport/import_graph_from_mongodb.py": {"section_header": "def thread_parser(platform, skip):", "modified_lines": [{"diff_line_no": 109, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 90, "target_line_no": 95, "value": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):\n"}, {"diff_line_no": 110, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 91, "target_line_no": 96, "value": "    new_lib_vers_total = []\n"}, {"diff_line_no": 111, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 92, "target_line_no": 97, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 112, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 93, "target_line_no": null, "value": "    total_count = 80#new_libs.count()\n"}, {"diff_line_no": 113, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    total_count = new_libs.count()\n"}, {"diff_line_no": 114, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 94, "target_line_no": 99, "value": "    count = 0\n"}, {"diff_line_no": 115, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 100, "value": "    skipcount = int(total_count / limit) + 1\n"}, {"diff_line_no": 116, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 101, "value": "\n"}]}, "incrementalimport/insert_graph_lib_vers_mongodb.py": {"section_header": "def insert_graph_library_version_for_npm(graph_update, graph_libraries, graph_ve", "modified_lines": [{"diff_line_no": 138, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 26, "target_line_no": 27, "value": "    graph_update_platform = graph_update.find_one({'platform': 'NPM'})\n"}, {"diff_line_no": 139, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 27, "target_line_no": 28, "value": "    platform = 'NPM'\n"}, {"diff_line_no": 140, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 29, "value": "    npm = crawler['npm']\n"}, {"diff_line_no": 141, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 29, "target_line_no": null, "value": "    for updatelib in graph_update_platform['new_libs']:\n"}, {"diff_line_no": 142, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 30, "target_line_no": null, "value": "        if ':' in updatelib:\n"}, {"diff_line_no": 143, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 31, "target_line_no": null, "value": "            libinfo = updatelib.split(':')\n"}, {"diff_line_no": 144, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 32, "target_line_no": null, "value": "            vendor = libinfo[0]\n"}, {"diff_line_no": 145, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 33, "target_line_no": null, "value": "            lib = libinfo[1]\n"}, {"diff_line_no": 146, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 34, "target_line_no": null, "value": "        else:\n"}, {"diff_line_no": 147, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 35, "target_line_no": null, "value": "            vendor = ''\n"}, {"diff_line_no": 148, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 36, "target_line_no": null, "value": "            lib = updatelib\n"}, {"diff_line_no": 149, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 37, "target_line_no": null, "value": "        lib_object = npm.find_one({'requested_name': lib})\n"}, {"diff_line_no": 150, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 38, "target_line_no": null, "value": "        versions = []\n"}, {"diff_line_no": 151, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 39, "target_line_no": null, "value": "        if 'versions' in lib_object and lib_object['versions']:\n"}, {"diff_line_no": 152, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 40, "target_line_no": null, "value": "            versions = list(lib_object['versions'].keys())\n"}, {"diff_line_no": 153, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 41, "target_line_no": null, "value": "        sorted_versions = sort_versions(versions, platform)\n"}, {"diff_line_no": 154, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 42, "target_line_no": null, "value": "        dist_tags = {}\n"}, {"diff_line_no": 155, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 43, "target_line_no": null, "value": "        if 'dist-tags' in lib_object and lib_object['dist-tags']:\n"}, {"diff_line_no": 156, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 44, "target_line_no": null, "value": "            dist_tags = lib_object['dist-tags']\n"}, {"diff_line_no": 157, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 45, "target_line_no": null, "value": "        existinglib = graph_libraries.find_one(\n"}, {"diff_line_no": 158, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 46, "target_line_no": null, "value": "            {'library': lib, 'vendor': vendor, 'platform': platform})\n"}, {"diff_line_no": 159, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 47, "target_line_no": null, "value": "        if existinglib:\n"}, {"diff_line_no": 160, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 48, "target_line_no": null, "value": "            graph_libraries.update_one({'library': lib, 'vendor': vendor, 'platform': platform},\n"}, {"diff_line_no": 161, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 49, "target_line_no": null, "value": "                                       {'$set': {'sorted_versions': sorted_versions, 'dist_tags': dist_tags, 'is_updated': True}})\n"}, {"diff_line_no": 162, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 50, "target_line_no": null, "value": "        else:\n"}, {"diff_line_no": 163, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 51, "target_line_no": null, "value": "            graph_libraries.insert({\n"}, {"diff_line_no": 164, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 52, "target_line_no": null, "value": "                'library': lib,\n"}, {"diff_line_no": 165, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 53, "target_line_no": null, "value": "                'vendor': vendor,\n"}, {"diff_line_no": 166, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 54, "target_line_no": null, "value": "                'platform': platform,\n"}, {"diff_line_no": 167, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 55, "target_line_no": null, "value": "                'sorted_versions': sorted_versions,\n"}, {"diff_line_no": 168, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 56, "target_line_no": null, "value": "                'dist_tags': dist_tags,\n"}, {"diff_line_no": 169, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 57, "target_line_no": null, "value": "                'is_updated': True\n"}, {"diff_line_no": 170, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 58, "target_line_no": null, "value": "            }, check_keys=False)\n"}, {"diff_line_no": 171, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 59, "target_line_no": null, "value": "    for libnamevendor, vernumlist in graph_update_platform['new_versions'].items():\n"}, {"diff_line_no": 172, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 60, "target_line_no": null, "value": "        vendor = ''\n"}, {"diff_line_no": 173, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 61, "target_line_no": null, "value": "        lib = libnamevendor\n"}, {"diff_line_no": 174, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 62, "target_line_no": null, "value": "        if ':' in libnamevendor:\n"}, {"diff_line_no": 175, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 63, "target_line_no": null, "value": "            libinfo = libnamevendor.split(':')\n"}, {"diff_line_no": 176, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 64, "target_line_no": null, "value": "            vendor = libinfo[0]\n"}, {"diff_line_no": 177, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 65, "target_line_no": null, "value": "            lib = libinfo[1]\n"}, {"diff_line_no": 178, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 66, "target_line_no": null, "value": "        lib_object = npm.find_one({'requested_name': lib})\n"}, {"diff_line_no": 179, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 67, "target_line_no": null, "value": "        for vernum in vernumlist:\n"}, {"diff_line_no": 180, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 68, "target_line_no": null, "value": "            #updated versions should be in npm collection, can be removed after fix the missing data in mongodb\n"}, {"diff_line_no": 181, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 69, "target_line_no": null, "value": "            if 'versions' not in lib_object:\n"}, {"diff_line_no": 182, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 70, "target_line_no": null, "value": "                continue\n"}, {"diff_line_no": 183, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 71, "target_line_no": null, "value": "            if vernum not in lib_object['versions']:\n"}, {"diff_line_no": 184, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 72, "target_line_no": null, "value": "                continue\n"}, {"diff_line_no": 185, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 73, "target_line_no": null, "value": "            ver = lib_object['versions'][vernum]\n"}, {"diff_line_no": 186, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 74, "target_line_no": null, "value": "            library = ver['name']\n"}, {"diff_line_no": 187, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 75, "target_line_no": null, "value": "            vend = vendor\n"}, {"diff_line_no": 188, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 76, "target_line_no": null, "value": "            version = ver['version']\n"}, {"diff_line_no": 189, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "            ver_details = get_version_details(version)\n"}, {"diff_line_no": 190, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "            major = ver_details[0]\n"}, {"diff_line_no": 191, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 79, "target_line_no": null, "value": "            minor = ver_details[1]\n"}, {"diff_line_no": 192, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 80, "target_line_no": null, "value": "            patch = ver_details[2]\n"}, {"diff_line_no": 193, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 81, "target_line_no": null, "value": "            pre_release = ver_details[3]\n"}, {"diff_line_no": 194, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 82, "target_line_no": null, "value": "            pre_release_weight = ver_details[4]\n"}, {"diff_line_no": 195, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 83, "target_line_no": null, "value": "            dependencies = {}\n"}, {"diff_line_no": 196, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 84, "target_line_no": null, "value": "            if 'dependencies' in ver and ver['dependencies']:\n"}, {"diff_line_no": 197, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 85, "target_line_no": null, "value": "                for lib, vers in ver['dependencies'].items():\n"}, {"diff_line_no": 198, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 86, "target_line_no": null, "value": "                    dependencies['' + ':' + lib] = vers\n"}, {"diff_line_no": 199, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 87, "target_line_no": null, "value": "            existingver = graph_versions.find_one({\n"}, {"diff_line_no": 200, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 88, "target_line_no": null, "value": "                'library': library, 'vendor': vend, 'version': version, 'platform': platform})\n"}, {"diff_line_no": 201, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 89, "target_line_no": null, "value": "            if not existingver:\n"}, {"diff_line_no": 202, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 90, "target_line_no": null, "value": "                graph_versions.insert({\n"}, {"diff_line_no": 203, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 91, "target_line_no": null, "value": "                    'library': library, 'vendor': vend, 'platform': platform, 'version': version,\n"}, {"diff_line_no": 204, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 92, "target_line_no": null, "value": "                    'major': major, 'minor': minor, 'patch': patch,\n"}, {"diff_line_no": 205, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 93, "target_line_no": null, "value": "                    'pre_release': pre_release, 'pre_release_weight': pre_release_weight,\n"}, {"diff_line_no": 206, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 94, "target_line_no": null, "value": "                    'dependencies': dependencies, 'is_updated': True\n"}, {"diff_line_no": 207, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "    libcount = len(graph_update_platform['new_libs'])\n"}, {"diff_line_no": 208, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "    vercount = len(graph_update_platform['new_versions'].keys())\n"}, {"diff_line_no": 209, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "    with requests.Session() as session:\n"}, {"diff_line_no": 210, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 33, "value": "        count = 0\n"}, {"diff_line_no": 211, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 34, "value": "        for updatelib in graph_update_platform['new_libs']:\n"}, {"diff_line_no": 212, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "            print(count, libcount, updatelib)\n"}, {"diff_line_no": 213, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 36, "value": "            count += 1\n"}, {"diff_line_no": 214, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 37, "value": "            if ':' in updatelib:\n"}, {"diff_line_no": 215, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "                libinfo = updatelib.split(':')\n"}, {"diff_line_no": 216, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "                vendor = libinfo[0]\n"}, {"diff_line_no": 217, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "                lib = libinfo[1]\n"}, {"diff_line_no": 218, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 41, "value": "            else:\n"}, {"diff_line_no": 219, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "                vendor = ''\n"}, {"diff_line_no": 220, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "                lib = updatelib\n"}, {"diff_line_no": 221, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "            lib_object = npm.find_one({'requested_name': lib})\n"}, {"diff_line_no": 222, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "            versions = []\n"}, {"diff_line_no": 223, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 46, "value": "            if 'versions' in lib_object and lib_object['versions']:\n"}, {"diff_line_no": 224, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "                versions = list(lib_object['versions'].keys())\n"}, {"diff_line_no": 225, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "            sorted_versions = sort_versions(versions, platform, session)\n"}, {"diff_line_no": 226, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "            dist_tags = {}\n"}, {"diff_line_no": 227, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "            if 'dist-tags' in lib_object and lib_object['dist-tags']:\n"}, {"diff_line_no": 228, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "                dist_tags = lib_object['dist-tags']\n"}, {"diff_line_no": 229, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "            existinglib = graph_libraries.find_one(\n"}, {"diff_line_no": 230, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 53, "value": "                {'library': lib, 'vendor': vendor, 'platform': platform})\n"}, {"diff_line_no": 231, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 54, "value": "            if existinglib:\n"}, {"diff_line_no": 232, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 55, "value": "                graph_libraries.update_one({'library': lib, 'vendor': vendor, 'platform': platform},\n"}, {"diff_line_no": 233, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "                                           {'$set': {'sorted_versions': sorted_versions, 'dist_tags': dist_tags, 'is_updated': True}})\n"}, {"diff_line_no": 234, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "            else:\n"}, {"diff_line_no": 235, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "                graph_libraries.insert({\n"}, {"diff_line_no": 236, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 59, "value": "                    'library': lib,\n"}, {"diff_line_no": 237, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 60, "value": "                    'vendor': vendor,\n"}, {"diff_line_no": 238, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "                    'platform': platform,\n"}, {"diff_line_no": 239, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "                    'sorted_versions': sorted_versions,\n"}, {"diff_line_no": 240, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "                    'dist_tags': dist_tags,\n"}, {"diff_line_no": 241, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 64, "value": "                    'is_updated': True\n"}, {"diff_line_no": 242, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 65, "value": "                }, check_keys=False)\n"}, {"diff_line_no": 243, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "        count = 0\n"}, {"diff_line_no": 244, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "        for libnamevendor, vernumlist in graph_update_platform['new_versions'].items():\n"}, {"diff_line_no": 245, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "            print(count, vercount, libnamevendor)\n"}, {"diff_line_no": 246, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 69, "value": "            count += 1\n"}, {"diff_line_no": 247, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 70, "value": "            vendor = ''\n"}, {"diff_line_no": 248, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 71, "value": "            lib = libnamevendor\n"}, {"diff_line_no": 249, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 72, "value": "            if ':' in libnamevendor:\n"}, {"diff_line_no": 250, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 73, "value": "                libinfo = libnamevendor.split(':')\n"}, {"diff_line_no": 251, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 74, "value": "                vendor = libinfo[0]\n"}, {"diff_line_no": 252, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 75, "value": "                lib = libinfo[1]\n"}, {"diff_line_no": 253, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 76, "value": "            lib_object = npm.find_one({'requested_name': lib})\n"}, {"diff_line_no": 254, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 77, "value": "            for vernum in vernumlist:\n"}, {"diff_line_no": 255, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 78, "value": "                #updated versions should be in npm collection, can be removed after fix the missing data in mongodb\n"}, {"diff_line_no": 256, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 79, "value": "                if 'versions' not in lib_object:\n"}, {"diff_line_no": 257, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 80, "value": "                    continue\n"}, {"diff_line_no": 258, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 81, "value": "                if vernum not in lib_object['versions']:\n"}, {"diff_line_no": 259, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 82, "value": "                    continue\n"}, {"diff_line_no": 260, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "                ver = lib_object['versions'][vernum]\n"}, {"diff_line_no": 261, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 84, "value": "                library = ver['name']\n"}, {"diff_line_no": 262, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 85, "value": "                vend = vendor\n"}, {"diff_line_no": 263, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 86, "value": "                version = ver['version']\n"}, {"diff_line_no": 264, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 87, "value": "                ver_details = get_version_details(version)\n"}, {"diff_line_no": 265, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 88, "value": "                major = ver_details[0]\n"}, {"diff_line_no": 266, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 89, "value": "                minor = ver_details[1]\n"}, {"diff_line_no": 267, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 90, "value": "                patch = ver_details[2]\n"}, {"diff_line_no": 268, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 91, "value": "                pre_release = ver_details[3]\n"}, {"diff_line_no": 269, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 92, "value": "                pre_release_weight = ver_details[4]\n"}, {"diff_line_no": 270, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 93, "value": "                dependencies = {}\n"}, {"diff_line_no": 271, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 94, "value": "                if 'dependencies' in ver and ver['dependencies']:\n"}, {"diff_line_no": 272, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "                    for lib, vers in ver['dependencies'].items():\n"}, {"diff_line_no": 273, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 96, "value": "                        dependencies['' + ':' + lib] = {'version_ranges': vers, 'sorted_versions': []}\n"}, {"diff_line_no": 274, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 97, "value": "                existingver = graph_versions.find_one({\n"}, {"diff_line_no": 275, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "                    'library': library, 'vendor': vend, 'version': version, 'platform': platform})\n"}, {"diff_line_no": 276, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "                if not existingver:\n"}, {"diff_line_no": 277, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 100, "value": "                    graph_versions.insert({\n"}, {"diff_line_no": 278, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 101, "value": "                        'library': library, 'vendor': vend, 'platform': platform, 'version': version,\n"}, {"diff_line_no": 279, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 102, "value": "                        'major': major, 'minor': minor, 'patch': patch,\n"}, {"diff_line_no": 280, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 103, "value": "                        'pre_release': pre_release, 'pre_release_weight': pre_release_weight,\n"}, {"diff_line_no": 281, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 104, "value": "                        'dependencies': dependencies, 'is_updated': True\n"}, {"diff_line_no": 282, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 105, "value": "                    }, check_keys=False)\n"}, {"diff_line_no": 283, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 106, "value": "    print(len(graph_update_platform['new_libs']), len(graph_update_platform['new_versions'].keys()))\n"}, {"diff_line_no": 284, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 107, "value": "\n"}, {"diff_line_no": 285, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 98, "target_line_no": 108, "value": "def insert_graph_library_version_for_pypi(graph_update, graph_libraries, graph_versions, crawler):\n"}]}, "incrementalimport/update_vul_info_to_graph.py": {"section_header": "def get_last_timestamp():", "modified_lines": [{"diff_line_no": 300, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 95, "value": "        return datetime.datetime(2017, 7, 25)\n"}, {"diff_line_no": 301, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 96, "value": "\n"}, {"diff_line_no": 302, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 97, "value": "def reset_vul_timestamp():\n"}, {"diff_line_no": 303, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 98, "target_line_no": null, "value": "    graph_update = crawl['graph_update_copy']\n"}, {"diff_line_no": 304, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    graph_update = crawl['graph_update_backup']\n"}, {"diff_line_no": 305, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 99, "target_line_no": 99, "value": "    if not graph_update.find_one({'type': 'issue_update'}):\n"}, {"diff_line_no": 306, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 100, "target_line_no": 100, "value": "        graph_update.insert({'type': 'issue_update', \n"}, {"diff_line_no": 307, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 101, "target_line_no": 101, "value": "                        'last_query_timestamp':  datetime.datetime.now()})"}]}}}, "e0eea8df6f646c077de5ff0f1e453d77bfbdcbb3": {"branch": "master", "message": "fix some logic err\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/graph_operation/create_graph.py": {"section_header": "def remove_vul_ver_relationship(vul_id, ver_id):", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 237, "target_line_no": 237, "value": "    version = list(n['a'] for n in ver)[0]\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 238, "target_line_no": 238, "value": "    rels = graph.run(\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 239, "target_line_no": 239, "value": "        f'''match(v: Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:AFFECTS]->(a: Version {{library: '{version['library']}'}}) return r''').data()\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 240, "target_line_no": null, "value": "\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 240, "value": "    libraryId = ver_id.split(':')[0] + ver_id.split(':')[2] + ver_id.split(':')[3]\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 241, "target_line_no": 241, "value": "    if len(list(r['r'] for r in rels)) == 0:\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 242, "target_line_no": 242, "value": "        graph.run(\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 243, "target_line_no": null, "value": "            f'''match (v:Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:LIBAFFECTS]->(a: Library {{libraryId: '{version['library'] + ':' + version['vendor'] + ':' +  version['platform']}'}}) delete r''')\n"}, {"diff_line_no": 20, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 243, "value": "            f'''match (v:Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:LIBAFFECTS]->(a: Library {{libraryId: '{libraryId}'}}) delete r''')\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 244, "target_line_no": 244, "value": "    else:\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 245, "target_line_no": 245, "value": "        node = graph.run(\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 246, "target_line_no": null, "value": "            f'''match (v:Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:LIBAFFECTS]->(a: Library {{libraryId: '{version['library'] + ':' + version['vendor'] + ':' +  version['platform']}'}}) return r.versions''').data()\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 246, "value": "            f'''match (v:Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:LIBAFFECTS]->(a: Library {{libraryId: '{libraryId}'}}) return r.versions''').data()\n"}, {"diff_line_no": 25, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 247, "value": "        if not node:\n"}, {"diff_line_no": 26, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 248, "value": "            return\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 247, "target_line_no": 249, "value": "        versionlist = list(n['r.versions'] for n in node)[0]\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 248, "target_line_no": 250, "value": "        versions = versionlist.split('|')\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 249, "target_line_no": 251, "value": "        versions.remove(version['version'])\n"}]}, "incrementalimport/graph_operation/incremental_import.py": {"section_header": "def add_vul_node(vul_node, platform):", "modified_lines": [{"diff_line_no": 47, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 124, "target_line_no": 126, "value": "                        versionlist += ver\n"}, {"diff_line_no": 48, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 125, "target_line_no": 127, "value": "                    create_vul_ver_relationship(\n"}, {"diff_line_no": 49, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 126, "target_line_no": 128, "value": "                        vul['vulnerabilityId'], lib + ':' + ver + ':' + vendor + ':' + platform)\n"}, {"diff_line_no": 50, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 127, "target_line_no": null, "value": "                version_list = get_vul_lib_relationship(\n"}, {"diff_line_no": 51, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 128, "target_line_no": null, "value": "                    vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform)[0] + '|' + versionlist\n"}, {"diff_line_no": 52, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 129, "target_line_no": null, "value": "                update_vul_lib_relationship(\n"}, {"diff_line_no": 53, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 130, "target_line_no": null, "value": "                    vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform, version_list)\n"}, {"diff_line_no": 54, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 129, "value": "                vul_lib_rels =  get_vul_lib_relationship(vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform)\n"}, {"diff_line_no": 55, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 130, "value": "                if vul_lib_rels:\n"}, {"diff_line_no": 56, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 131, "value": "                    version_list = get_vul_lib_relationship(\n"}, {"diff_line_no": 57, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 132, "value": "                        vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform)[0] + '|' + versionlist\n"}, {"diff_line_no": 58, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 133, "value": "                    update_vul_lib_relationship(\n"}, {"diff_line_no": 59, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 134, "value": "                        vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform, version_list)\n"}, {"diff_line_no": 60, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 135, "value": "                else:\n"}, {"diff_line_no": 61, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 136, "value": "                    create_vul_lib_relationship(vul['vulnerabilityId'], lib + ':' + vendor + ':' + platform, version_list)\n"}, {"diff_line_no": 62, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 131, "target_line_no": 137, "value": "\n"}, {"diff_line_no": 63, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 132, "target_line_no": 138, "value": "\n"}, {"diff_line_no": 64, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 133, "target_line_no": 139, "value": "def incremental_add(libvers):"}]}}}, "d9247a47c0a6f322ebf81404d3b8d18b71e65123": {"branch": "master", "message": "improve performance\n", "new_file": {}, "del_file": {}, "mod_file": {"Config/configuration.ini": {"section_header": "DB = cvetriage", "modified_lines": [{"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "User = secbug\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "Password = fgyu7RE0\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 7, "value": "[Mongodb]\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 8, "target_line_no": null, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 23, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 24, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 9, "value": "Port = 27019\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "DB = library-crawler\n"}, {"diff_line_no": 29, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "DB = test2\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 32, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 33, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687\n"}, {"diff_line_no": 34, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 17, "value": "User = neo4j\n"}, {"diff_line_no": 35, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 18, "value": "Password = 1234\n"}, {"diff_line_no": 36, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 19, "value": "[InternalIP]\n"}, {"diff_line_no": 37, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 20, "target_line_no": null, "value": "IP = 192.168.1.10\n"}, {"diff_line_no": 38, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 39, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "IP = localhost\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "incrementalimport/graph_operation/create_graph.py": {"section_header": "def ver_ver_exists(srcid, dstid, relType):", "modified_lines": [{"diff_line_no": 65, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 157, "target_line_no": 169, "value": "    res = graph.run(\n"}, {"diff_line_no": 66, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 158, "target_line_no": 170, "value": "        f'''match (a:Version{{versionId: '{srcid}'}})-[r:{relType}]->(b:Version{{versionId: '{dstid}'}}) return r''').data()\n"}, {"diff_line_no": 67, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 159, "target_line_no": 171, "value": "    if res:\n"}, {"diff_line_no": 68, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 160, "target_line_no": null, "value": "        print(srclibid, dstverid + ' '+ relType + ' relationship already exists')\n"}, {"diff_line_no": 69, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 172, "value": "        print(srcid, dstid + ' '+ relType + ' relationship already exists')\n"}, {"diff_line_no": 70, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 161, "target_line_no": 173, "value": "        return True\n"}, {"diff_line_no": 71, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 162, "target_line_no": 174, "value": "    else:\n"}, {"diff_line_no": 72, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 163, "target_line_no": 175, "value": "        return False\n"}]}, "incrementalimport/graph_operation/incremental_import.py": {"section_header": "def incremental_add(libvers):", "modified_lines": [{"diff_line_no": 173, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 163, "target_line_no": 153, "value": "                if len(versionlist) < 2:\n"}, {"diff_line_no": 174, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 164, "target_line_no": 154, "value": "                    sorted_version_list = versionlist\n"}, {"diff_line_no": 175, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 165, "target_line_no": 155, "value": "                else:\n"}, {"diff_line_no": 176, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 166, "target_line_no": null, "value": "                    sorted_version_list = sorted(\n"}, {"diff_line_no": 177, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 167, "target_line_no": null, "value": "                        versionlist, key=functools.cmp_to_key(is_greater_than))\n"}, {"diff_line_no": 178, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 156, "value": "                    sorted_version_list = sort_versions(versionlist, ver['platform'], None)\n"}, {"diff_line_no": 179, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 168, "target_line_no": 157, "value": "                create_ver_ver_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 180, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 169, "target_line_no": 158, "value": "                                            dependlib + ':' + sorted_version_list[-1] + ':' + ver['vendor'] + ':' + ver['platform'], 'DEFAULT')\n"}, {"diff_line_no": 181, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 170, "target_line_no": 159, "value": "                create_ver_lib_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}]}, "incrementalimport/import_graph_from_mongodb.py": {"section_header": "c = pymongo.MongoClient(MONGO_HOST, username=MONGO_USER,", "modified_lines": [{"diff_line_no": 204, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 21, "target_line_no": 22, "value": "crawl = c[MONGO_DB]\n"}, {"diff_line_no": 205, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 22, "target_line_no": 23, "value": "graph_libraries = crawl['graph_libraries']\n"}, {"diff_line_no": 206, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 23, "target_line_no": 24, "value": "graph_versions = crawl['graph_versions']\n"}, {"diff_line_no": 207, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 24, "target_line_no": null, "value": "graph_platform = crawl['npm']\n"}, {"diff_line_no": 208, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 25, "value": "limit = 10\n"}, {"diff_line_no": 209, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 25, "target_line_no": 26, "value": "\n"}, {"diff_line_no": 210, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 26, "target_line_no": null, "value": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):\n"}, {"diff_line_no": 211, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 27, "target_line_no": null, "value": "    new_lib_vers = []\n"}, {"diff_line_no": 212, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "def thread_parser(platform, skip):\n"}, {"diff_line_no": 213, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 28, "value": "    ct = pymongo.MongoClient(MONGO_HOST, username=MONGO_USER,\n"}, {"diff_line_no": 214, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 29, "value": "                            password=MONGO_PWD, port=MONGO_PORT, authSource=MONGO_AUTH)\n"}, {"diff_line_no": 215, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "    crawlerdb = ct[MONGO_DB]\n"}, {"diff_line_no": 216, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "    graph_libs = crawlerdb['graph_libraries']\n"}, {"diff_line_no": 217, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "    graph_vers = crawlerdb['graph_versions']\n"}, {"diff_line_no": 218, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 33, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 219, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 29, "target_line_no": null, "value": "    updated_libs = []\n"}, {"diff_line_no": 220, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 30, "target_line_no": null, "value": "    updated_vers = []\n"}, {"diff_line_no": 221, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 31, "target_line_no": 34, "value": "    total_count = new_libs.count()\n"}, {"diff_line_no": 222, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "    new_lib_vers = []\n"}, {"diff_line_no": 223, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 36, "value": "    count = 0\n"}, {"diff_line_no": 224, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 37, "value": "    skip = skip * limit\n"}, {"diff_line_no": 225, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "    with requests.Session() as session:\n"}, {"diff_line_no": 226, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "        for lib in new_libs.skip(skip).limit(limit):\n"}, {"diff_line_no": 227, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "            count += 1\n"}, {"diff_line_no": 228, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 41, "value": "            print(count + skip, total_count, lib['library'])\n"}, {"diff_line_no": 229, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "            sorted_versions = get_sorted_all_version(\n"}, {"diff_line_no": 230, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "                crawlerdb[str(platform.lower())], lib['library'], lib['vendor'], platform, session)\n"}, {"diff_line_no": 231, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "            oldest = ''\n"}, {"diff_line_no": 232, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "            latest = ''\n"}, {"diff_line_no": 233, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 46, "value": "            if sorted_versions:\n"}, {"diff_line_no": 234, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "                oldest = sorted_versions[0]\n"}, {"diff_line_no": 235, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "                latest = sorted_versions[-1]\n"}, {"diff_line_no": 236, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "            library = {\n"}, {"diff_line_no": 237, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "                'library': lib['library'],\n"}, {"diff_line_no": 238, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "                'vendor': lib['vendor'],\n"}, {"diff_line_no": 239, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "                'platform': lib['platform'],\n"}, {"diff_line_no": 240, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 53, "value": "                'dist_tags': json.dumps(lib['dist_tags']) if 'dist_tags' in lib and lib['dist_tags'] else {},\n"}, {"diff_line_no": 241, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 54, "value": "                'oldest': oldest,\n"}, {"diff_line_no": 242, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 55, "value": "                'latest': latest\n"}, {"diff_line_no": 243, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "            }\n"}, {"diff_line_no": 244, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "            versions = list(graph_vers.find(\n"}, {"diff_line_no": 245, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "                {'library': lib['library'], 'vendor': lib['vendor'], 'platform': lib['platform'], 'is_updated': True}))\n"}, {"diff_line_no": 246, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 59, "value": "\n"}, {"diff_line_no": 247, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 60, "value": "            for ver in versions:\n"}, {"diff_line_no": 248, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "                ranges = ver['dependencies']\n"}, {"diff_line_no": 249, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "                ver['dependencyrange'] = ver['dependencies']\n"}, {"diff_line_no": 250, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "                ver['dependencies'] = {}\n"}, {"diff_line_no": 251, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 64, "value": "                for deplibvendor, range in ranges.items():\n"}, {"diff_line_no": 252, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 65, "value": "                    deplib = deplibvendor\n"}, {"diff_line_no": 253, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "                    vendor = ''\n"}, {"diff_line_no": 254, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "                    if ':' in deplibvendor:\n"}, {"diff_line_no": 255, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "                        libinfo = deplibvendor.split(':')\n"}, {"diff_line_no": 256, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 69, "value": "                        deplib = libinfo[1]\n"}, {"diff_line_no": 257, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 70, "value": "                        vendor = libinfo[0]\n"}, {"diff_line_no": 258, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 71, "value": "                    if not crawlerdb[platform.lower()].find_one({'requested_name': deplib}):\n"}, {"diff_line_no": 259, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 72, "value": "                        print(f'unable to find library:{lib[\"library\"]}-{ver[\"version\"]}-->{deplib}-{range}')\n"}, {"diff_line_no": 260, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 73, "value": "                        continue\n"}, {"diff_line_no": 261, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 74, "value": "                    sorted_vers = get_sorted_all_version(\n"}, {"diff_line_no": 262, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 75, "value": "                        crawlerdb[platform.lower()], libinfo[1], libinfo[0], platform, session)\n"}, {"diff_line_no": 263, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 76, "value": "                    dependencies = ''\n"}, {"diff_line_no": 264, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 77, "value": "                    range = parse_dep_range(deplib, range, vendor, crawlerdb[platform.lower()], platform, session)\n"}, {"diff_line_no": 265, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 78, "value": "                    if sorted_vers:\n"}, {"diff_line_no": 266, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 79, "value": "                        for sver in sorted_vers:\n"}, {"diff_line_no": 267, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 80, "value": "                            if check_version_in_range(sver, range, platform, session):\n"}, {"diff_line_no": 268, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 81, "value": "                                if not dependencies:\n"}, {"diff_line_no": 269, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 82, "value": "                                    dependencies += sver\n"}, {"diff_line_no": 270, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "                                else:\n"}, {"diff_line_no": 271, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 84, "value": "                                    dependencies += '|' + sver\n"}, {"diff_line_no": 272, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 85, "value": "                    ver['dependencies'][deplibvendor] = dependencies\n"}, {"diff_line_no": 273, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 86, "value": "            library['versions'] = versions\n"}, {"diff_line_no": 274, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 87, "value": "            new_lib_vers.append(library)\n"}, {"diff_line_no": 275, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 88, "value": "    return new_lib_vers\n"}, {"diff_line_no": 276, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 89, "value": "\n"}, {"diff_line_no": 277, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 90, "value": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):\n"}, {"diff_line_no": 278, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 91, "value": "    new_lib_vers_total = []\n"}, {"diff_line_no": 279, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 92, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 280, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 93, "value": "    total_count = 80#new_libs.count()\n"}, {"diff_line_no": 281, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 32, "target_line_no": 94, "value": "    count = 0\n"}, {"diff_line_no": 282, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 33, "target_line_no": null, "value": "    for lib in new_libs.batch_size(1):\n"}, {"diff_line_no": 283, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 34, "target_line_no": null, "value": "        count += 1\n"}, {"diff_line_no": 284, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 35, "target_line_no": null, "value": "        print(count, total_count, lib['library'])\n"}, {"diff_line_no": 285, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 36, "target_line_no": null, "value": "        updated_libs.append(\n"}, {"diff_line_no": 286, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 37, "target_line_no": null, "value": "            {'library': lib['library'], 'vendor': lib['vendor']})\n"}, {"diff_line_no": 287, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 38, "target_line_no": null, "value": "        sorted_versions = get_sorted_all_version(\n"}, {"diff_line_no": 288, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 39, "target_line_no": null, "value": "            crawlerdb[str(platform.lower())], lib['library'], lib['vendor'], platform)\n"}, {"diff_line_no": 289, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 40, "target_line_no": null, "value": "        oldest = ''\n"}, {"diff_line_no": 290, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 41, "target_line_no": null, "value": "        latest = ''\n"}, {"diff_line_no": 291, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 42, "target_line_no": null, "value": "        if sorted_versions:\n"}, {"diff_line_no": 292, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 43, "target_line_no": null, "value": "            oldest = sorted_versions[0]\n"}, {"diff_line_no": 293, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 44, "target_line_no": null, "value": "            latest = sorted_versions[-1]\n"}, {"diff_line_no": 294, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 45, "target_line_no": null, "value": "        library = {\n"}, {"diff_line_no": 295, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 46, "target_line_no": null, "value": "            'library': lib['library'],\n"}, {"diff_line_no": 296, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 47, "target_line_no": null, "value": "            'vendor': lib['vendor'],\n"}, {"diff_line_no": 297, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 48, "target_line_no": null, "value": "            'platform': lib['platform'],\n"}, {"diff_line_no": 298, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 49, "target_line_no": null, "value": "            'dist_tags': json.dumps(lib['dist_tags']) if 'dist_tags' in lib and lib['dist_tags'] else {},\n"}, {"diff_line_no": 299, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 50, "target_line_no": null, "value": "            'oldest': oldest,\n"}, {"diff_line_no": 300, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 51, "target_line_no": null, "value": "            'latest': latest\n"}, {"diff_line_no": 301, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 52, "target_line_no": null, "value": "        }\n"}, {"diff_line_no": 302, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 53, "target_line_no": null, "value": "        versions = list(graph_vers.find(\n"}, {"diff_line_no": 303, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 54, "target_line_no": null, "value": "            {'library': lib['library'], 'vendor': lib['vendor'], 'platform': lib['platform'], 'is_updated': True}))\n"}, {"diff_line_no": 304, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 55, "target_line_no": null, "value": "        for ver in versions:\n"}, {"diff_line_no": 305, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 56, "target_line_no": null, "value": "            updated_vers.append({'library': lib['library'], 'vendor': lib['vendor'],\n"}, {"diff_line_no": 306, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 57, "target_line_no": null, "value": "                                 'platform': lib['platform'], 'version': ver['version']})\n"}, {"diff_line_no": 307, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 58, "target_line_no": null, "value": "            ranges = ver['dependencies']\n"}, {"diff_line_no": 308, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 59, "target_line_no": null, "value": "            ver['dependencyrange'] = ver['dependencies']\n"}, {"diff_line_no": 309, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 60, "target_line_no": null, "value": "            ver['dependencies'] = {}\n"}, {"diff_line_no": 310, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 61, "target_line_no": null, "value": "            for deplibvendor, range in ranges.items():\n"}, {"diff_line_no": 311, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 62, "target_line_no": null, "value": "                deplib = deplibvendor\n"}, {"diff_line_no": 312, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 63, "target_line_no": null, "value": "                vendor = ''\n"}, {"diff_line_no": 313, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 64, "target_line_no": null, "value": "                if ':' in deplibvendor:\n"}, {"diff_line_no": 314, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 65, "target_line_no": null, "value": "                    libinfo = deplibvendor.split(':')\n"}, {"diff_line_no": 315, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 66, "target_line_no": null, "value": "                    deplib = libinfo[1]\n"}, {"diff_line_no": 316, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 67, "target_line_no": null, "value": "                    vendor = libinfo[0]\n"}, {"diff_line_no": 317, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 68, "target_line_no": null, "value": "                if not crawlerdb[platform.lower()].find_one({'requested_name': deplib}):\n"}, {"diff_line_no": 318, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 69, "target_line_no": null, "value": "                    print(f'unable to find library:{lib[\"library\"]}-{ver[\"version\"]}-->{deplib}-{range}')\n"}, {"diff_line_no": 319, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 70, "target_line_no": null, "value": "                    continue\n"}, {"diff_line_no": 320, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 71, "target_line_no": null, "value": "                sorted_vers = get_sorted_all_version(\n"}, {"diff_line_no": 321, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 72, "target_line_no": null, "value": "                    crawlerdb[platform.lower()], libinfo[1], libinfo[0], platform)\n"}, {"diff_line_no": 322, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 73, "target_line_no": null, "value": "                dependencies = ''\n"}, {"diff_line_no": 323, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 74, "target_line_no": null, "value": "                range = parse_dep_range(deplib, range, vendor, crawlerdb[platform.lower()], platform)\n"}, {"diff_line_no": 324, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 75, "target_line_no": null, "value": "                if sorted_vers:\n"}, {"diff_line_no": 325, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 76, "target_line_no": null, "value": "                    for sver in sorted_vers:\n"}, {"diff_line_no": 326, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "                        if check_in_range(sver, range):\n"}, {"diff_line_no": 327, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "                            if not dependencies:\n"}, {"diff_line_no": 328, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 79, "target_line_no": null, "value": "                                dependencies += sver\n"}, {"diff_line_no": 329, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 80, "target_line_no": null, "value": "                            else:\n"}, {"diff_line_no": 330, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 81, "target_line_no": null, "value": "                                dependencies += '|' + sver\n"}, {"diff_line_no": 331, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 82, "target_line_no": null, "value": "                ver['dependencies'][deplibvendor] = dependencies\n"}, {"diff_line_no": 332, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 83, "target_line_no": null, "value": "        library['versions'] = versions\n"}, {"diff_line_no": 333, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 84, "target_line_no": null, "value": "        new_lib_vers.append(library)\n"}, {"diff_line_no": 334, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 85, "target_line_no": null, "value": "    create_library_id(new_lib_vers)\n"}, {"diff_line_no": 335, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 86, "target_line_no": null, "value": "    for vers in new_lib_vers:\n"}, {"diff_line_no": 336, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "    skipcount = int(total_count / limit) + 1\n"}, {"diff_line_no": 337, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 96, "value": "\n"}, {"diff_line_no": 338, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 97, "value": "\n"}, {"diff_line_no": 339, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:\n"}, {"diff_line_no": 340, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "        future_name = {executor.submit(thread_parser, platform, file): file for file in range(skipcount)}\n"}, {"diff_line_no": 341, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 100, "value": "        for future in concurrent.futures.as_completed(future_name):\n"}, {"diff_line_no": 342, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 101, "value": "            new_lib_vers_total += future.result()\n"}, {"diff_line_no": 343, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 102, "value": "    create_library_id(new_lib_vers_total)\n"}, {"diff_line_no": 344, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 103, "value": "    for vers in new_lib_vers_total:\n"}, {"diff_line_no": 345, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 87, "target_line_no": 104, "value": "        create_version_id(vers['versions'])\n"}, {"diff_line_no": 346, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 88, "target_line_no": 105, "value": "    print('id created')\n"}, {"diff_line_no": 347, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 89, "target_line_no": null, "value": "    incremental_add(new_lib_vers)\n"}, {"diff_line_no": 348, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 106, "value": "    incremental_add(new_lib_vers_total)\n"}, {"diff_line_no": 349, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 90, "target_line_no": 107, "value": "    print('incremental updated')\n"}, {"diff_line_no": 350, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 91, "target_line_no": 108, "value": "    # for clean all updated libs and vers status, comment this to keep test data from been deleted\n"}, {"diff_line_no": 351, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 92, "target_line_no": 109, "value": "    # for lib in updated_libs:\n"}]}, "incrementalimport/version_tools.py": {"section_header": "def parse_dep_range_npm(lib,dep, collection):", "modified_lines": [{"diff_line_no": 413, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 59, "target_line_no": 59, "value": "        ret_range = dep\n"}, {"diff_line_no": 414, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 60, "target_line_no": 60, "value": "    else:\n"}, {"diff_line_no": 415, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 61, "target_line_no": 61, "value": "        ret_range = 'EMPTY_OR_INVALID'\n"}, {"diff_line_no": 416, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 62, "target_line_no": null, "value": "    return ret_range\n"}, {"diff_line_no": 417, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 418, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "    return ret_range\n"}, {"diff_line_no": 419, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "\n"}, {"diff_line_no": 420, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 64, "value": "def check_version_in_range(sver, range, platform, session):\n"}, {"diff_line_no": 421, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 65, "value": "    if platform == 'NPM':\n"}, {"diff_line_no": 422, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "        return check_in_range(sver, range, session)\n"}, {"diff_line_no": 423, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "    elif platform == 'Pypi':\n"}, {"diff_line_no": 424, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "        pass\n"}, {"diff_line_no": 425, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 69, "value": "    elif platform == 'Maven':\n"}, {"diff_line_no": 426, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 70, "value": "        pass\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "js/server.js": {"section_header": "var server=http.createServer(function(req,res){", "modified_lines": [{"diff_line_no": 433, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 70, "target_line_no": 70, "value": "       versionlist = JSON.parse(req.query['versionlist'])\n"}, {"diff_line_no": 434, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 71, "target_line_no": 71, "value": "       res.end(sort_asc_versionlist(versionlist).toString())\n"}, {"diff_line_no": 435, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 72, "target_line_no": 72, "value": "   }\n"}, {"diff_line_no": 436, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 73, "target_line_no": null, "value": "   //\u5148\u8bfb\u53d6\u6587\u4ef6\n"}, {"diff_line_no": 437, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 74, "target_line_no": null, "value": "   fs.readFile(href,function(err,data){\n"}, {"diff_line_no": 438, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 75, "target_line_no": null, "value": "      if(!err){\n"}, {"diff_line_no": 439, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 76, "target_line_no": null, "value": "         //response.write()\u5411\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u53d1\u9001\u54cd\u5e94\u5185\u5bb9\u3002\n"}, {"diff_line_no": 440, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "         res.write(data.toString());\n"}, {"diff_line_no": 441, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "         res.end(\"\u6d4b\u8bd5\u4e2d\");\n"}, {"diff_line_no": 442, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 79, "target_line_no": null, "value": "      }\n"}, {"diff_line_no": 443, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 80, "target_line_no": null, "value": "   });\n"}, {"diff_line_no": 444, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 73, "value": "})\n"}, {"diff_line_no": 445, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 82, "target_line_no": 74, "value": "//\u76d1\u542c\u8fd9\u4e2a\u7aef\u53e3\n"}, {"diff_line_no": 446, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 83, "target_line_no": 75, "value": "server.listen(8000,function(){\n"}]}, "local.yml": {"section_header": "services:", "modified_lines": [{"diff_line_no": 461, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "            - 8000:8000\n"}, {"diff_line_no": 462, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "        environment:\n"}, {"diff_line_no": 463, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "            - PORT=8000\n"}, {"diff_line_no": 464, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "    semver_server2:\n"}, {"diff_line_no": 465, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 14, "value": "        build:\n"}, {"diff_line_no": 466, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "            context: .\n"}, {"diff_line_no": 467, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 16, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 468, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 17, "value": "        ports:\n"}, {"diff_line_no": 469, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "            - 1000:8000\n"}, {"diff_line_no": 470, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 19, "value": "        environment:\n"}, {"diff_line_no": 471, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "            - PORT=8001\n"}, {"diff_line_no": 472, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 21, "value": "    semver_server3:\n"}, {"diff_line_no": 473, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 22, "value": "        build:\n"}, {"diff_line_no": 474, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 23, "value": "            context: .\n"}, {"diff_line_no": 475, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 24, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 476, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 25, "value": "        ports:\n"}, {"diff_line_no": 477, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 26, "value": "            - 8002:8000\n"}, {"diff_line_no": 478, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "        environment:\n"}, {"diff_line_no": 479, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 28, "value": "            - PORT=8002\n"}, {"diff_line_no": 480, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 29, "value": "    semver_server4:\n"}, {"diff_line_no": 481, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "        build:\n"}, {"diff_line_no": 482, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "            context: .\n"}, {"diff_line_no": 483, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 484, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 33, "value": "        ports:\n"}, {"diff_line_no": 485, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 34, "value": "            - 8003:8000\n"}, {"diff_line_no": 486, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "        environment:\n"}, {"diff_line_no": 487, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 36, "value": "            - PORT=8003\n"}, {"diff_line_no": 488, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 37, "value": "    semver_server5:\n"}, {"diff_line_no": 489, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "        build:\n"}, {"diff_line_no": 490, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "            context: .\n"}, {"diff_line_no": 491, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 492, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 41, "value": "        ports:\n"}, {"diff_line_no": 493, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "            - 8004:8000\n"}, {"diff_line_no": 494, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "        environment:\n"}, {"diff_line_no": 495, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "            - PORT=8004\n"}, {"diff_line_no": 496, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "    semver_server6:\n"}, {"diff_line_no": 497, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 46, "value": "        build:\n"}, {"diff_line_no": 498, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "            context: .\n"}, {"diff_line_no": 499, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 500, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "        ports:\n"}, {"diff_line_no": 501, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "            - 8005:8000\n"}, {"diff_line_no": 502, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "        environment:\n"}, {"diff_line_no": 503, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "            - PORT=8005\n"}, {"diff_line_no": 504, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 53, "value": "    semver_server7:\n"}, {"diff_line_no": 505, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 54, "value": "        build:\n"}, {"diff_line_no": 506, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 55, "value": "            context: .\n"}, {"diff_line_no": 507, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 508, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "        ports:\n"}, {"diff_line_no": 509, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "            - 8006:8000\n"}, {"diff_line_no": 510, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 59, "value": "        environment:\n"}, {"diff_line_no": 511, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 60, "value": "            - PORT=8006\n"}, {"diff_line_no": 512, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "    semver_server8:\n"}, {"diff_line_no": 513, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "        build:\n"}, {"diff_line_no": 514, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "            context: .\n"}, {"diff_line_no": 515, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 64, "value": "            dockerfile: ./compose/semver/Dockerfile\n"}, {"diff_line_no": 516, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 65, "value": "        ports:\n"}, {"diff_line_no": 517, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "            - 8007:8000\n"}, {"diff_line_no": 518, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "        environment:\n"}, {"diff_line_no": 519, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "            - PORT=8007\n"}, {"diff_line_no": 520, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 13, "target_line_no": 69, "value": "    neo4j:\n"}, {"diff_line_no": 521, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 70, "value": "        build:\n"}, {"diff_line_no": 522, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 71, "value": "            context: .\n"}]}, "utils/useful_tools/format_js_api.py": {"section_header": "", "modified_lines": [{"diff_line_no": 528, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 1, "target_line_no": 1, "value": "import requests\n"}, {"diff_line_no": 529, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 2, "target_line_no": 2, "value": "import json\n"}, {"diff_line_no": 530, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 3, "target_line_no": 3, "value": "from lib.database import get_internal_ip\n"}, {"diff_line_no": 531, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 4, "value": "import time\n"}, {"diff_line_no": 532, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 5, "value": "import random\n"}, {"diff_line_no": 533, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 4, "target_line_no": 6, "value": "ip = get_internal_ip()\n"}, {"diff_line_no": 534, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 5, "target_line_no": null, "value": "def is_greater_than(ver1, ver2):\n"}, {"diff_line_no": 535, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 6, "target_line_no": null, "value": "    try:\n"}, {"diff_line_no": 536, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 7, "value": "\n"}, {"diff_line_no": 537, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "def is_greater_than(ver1, ver2, session):\n"}, {"diff_line_no": 538, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 9, "value": "    has_session = True\n"}, {"diff_line_no": 539, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 10, "value": "    if session == None:\n"}, {"diff_line_no": 540, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 11, "value": "        session = requests.Session()\n"}, {"diff_line_no": 541, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 8, "target_line_no": null, "value": "        res = session.get(f'http://{ip}:8000/compare?a={ver1}&b={ver2}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 542, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 12, "value": "        has_session = False\n"}, {"diff_line_no": 543, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "    try:\n"}, {"diff_line_no": 544, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 14, "value": "        port = random.randint(8000, 8007)\n"}, {"diff_line_no": 545, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "        res = session.get(f'http://{ip}:{str(port)}/compare?a={ver1}&b={ver2}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 546, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 16, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 547, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 10, "target_line_no": null, "value": "        session.close()\n"}, {"diff_line_no": 548, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 17, "value": "        if not has_session:\n"}, {"diff_line_no": 549, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "            session.close()\n"}, {"diff_line_no": 550, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 19, "value": "        return res.content.decode() == 'true'\n"}, {"diff_line_no": 551, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 20, "value": "    except Exception as e:\n"}, {"diff_line_no": 552, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "        print(e)\n"}, {"diff_line_no": 553, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 21, "value": "        #print(e)\n"}, {"diff_line_no": 554, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 22, "value": "        time.sleep(0.01)\n"}, {"diff_line_no": 555, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 23, "value": "        return is_greater_than(ver1, ver2, session)\n"}, {"diff_line_no": 556, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 24, "value": "\n"}, {"diff_line_no": 557, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "def check_range_type(name, range):\n"}, {"diff_line_no": 558, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 16, "target_line_no": null, "value": "    try:\n"}, {"diff_line_no": 559, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 25, "value": "def check_range_type(name, range, session):\n"}, {"diff_line_no": 560, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 26, "value": "    has_session = True\n"}, {"diff_line_no": 561, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "    if session == None:\n"}, {"diff_line_no": 562, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 28, "value": "        session = requests.Session()\n"}, {"diff_line_no": 563, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 18, "target_line_no": null, "value": "        res = session.get(f'http://{ip}:8000/check?name={name}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 564, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 29, "value": "        has_session = False\n"}, {"diff_line_no": 565, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "    try:\n"}, {"diff_line_no": 566, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "        port = random.randint(8000, 8007)\n"}, {"diff_line_no": 567, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "        res = session.get(f'http://{ip}:{str(port)}/check?name={name}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 568, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 33, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 569, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 20, "target_line_no": null, "value": "        session.close()\n"}, {"diff_line_no": 570, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 34, "value": "        if not has_session:\n"}, {"diff_line_no": 571, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "            session.close()\n"}, {"diff_line_no": 572, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 21, "target_line_no": 36, "value": "        return res.content.decode()\n"}, {"diff_line_no": 573, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 22, "target_line_no": 37, "value": "    except Exception as e:\n"}, {"diff_line_no": 574, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 23, "target_line_no": null, "value": "        print(e)\n"}, {"diff_line_no": 575, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "        #print(e)\n"}, {"diff_line_no": 576, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "        time.sleep(0.01)\n"}, {"diff_line_no": 577, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "        return check_range_type(name, range, session)\n"}, {"diff_line_no": 578, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 24, "target_line_no": 41, "value": "\n"}, {"diff_line_no": 579, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 25, "target_line_no": 42, "value": "\n"}, {"diff_line_no": 580, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 26, "target_line_no": null, "value": "def sort_vers(versionlist):\n"}, {"diff_line_no": 581, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 27, "target_line_no": null, "value": "    try:\n"}, {"diff_line_no": 582, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "def sort_vers(versionlist, session):\n"}, {"diff_line_no": 583, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "    has_session = True\n"}, {"diff_line_no": 584, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "    if session == None:\n"}, {"diff_line_no": 585, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 46, "value": "        session = requests.Session()\n"}, {"diff_line_no": 586, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 29, "target_line_no": null, "value": "        res = session.get(f'http://{ip}:8000/sort?versionlist={json.dumps(versionlist)}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 587, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "        has_session = False\n"}, {"diff_line_no": 588, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "    try:\n"}, {"diff_line_no": 589, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "        port = random.randint(8000, 8007)\n"}, {"diff_line_no": 590, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "        res = session.get(f'http://{ip}:{str(port)}/sort?versionlist={json.dumps(versionlist)}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 591, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 51, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 592, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 31, "target_line_no": null, "value": "        session.close()\n"}, {"diff_line_no": 593, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "        if not has_session:\n"}, {"diff_line_no": 594, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 53, "value": "            session.close()\n"}, {"diff_line_no": 595, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 32, "target_line_no": 54, "value": "        return res.content.decode().split(',')\n"}, {"diff_line_no": 596, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 33, "target_line_no": 55, "value": "    except Exception as e:\n"}, {"diff_line_no": 597, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 34, "target_line_no": null, "value": "        print(e)\n"}, {"diff_line_no": 598, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "        #print(e)\n"}, {"diff_line_no": 599, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "        time.sleep(0.01)\n"}, {"diff_line_no": 600, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "        return sort_vers(versionlist, session)\n"}, {"diff_line_no": 601, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 35, "target_line_no": 59, "value": "\n"}, {"diff_line_no": 602, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 36, "target_line_no": 60, "value": "\n"}, {"diff_line_no": 603, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 37, "target_line_no": null, "value": "def check_in_range(ver, range):\n"}, {"diff_line_no": 604, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 38, "target_line_no": null, "value": "    try:\n"}, {"diff_line_no": 605, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "def check_in_range(ver, range, session):\n"}, {"diff_line_no": 606, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "    has_session = True\n"}, {"diff_line_no": 607, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 63, "value": "    if session == None:\n"}, {"diff_line_no": 608, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 39, "target_line_no": 64, "value": "        session = requests.Session()\n"}, {"diff_line_no": 609, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 40, "target_line_no": null, "value": "        res = session.get(f'http://{ip}:8000/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 610, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 65, "value": "        has_session = False\n"}, {"diff_line_no": 611, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 66, "value": "    try:\n"}, {"diff_line_no": 612, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 67, "value": "        port = random.randint(8000, 8007)\n"}, {"diff_line_no": 613, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 68, "value": "        res = session.get(f'http://{ip}:{str(port)}/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 614, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 41, "target_line_no": 69, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 615, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 42, "target_line_no": null, "value": "        session.close()\n"}, {"diff_line_no": 616, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 70, "value": "        if not has_session:\n"}, {"diff_line_no": 617, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 71, "value": "            session.close()\n"}, {"diff_line_no": 618, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 43, "target_line_no": 72, "value": "        return res.content.decode() == 'true'\n"}, {"diff_line_no": 619, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 44, "target_line_no": 73, "value": "    except Exception as e:\n"}, {"diff_line_no": 620, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 45, "target_line_no": null, "value": "        print(e)\n"}, {"diff_line_no": 621, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 622, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 74, "value": "        #print(e)\n"}, {"diff_line_no": 623, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 75, "value": "        time.sleep(0.01)\n"}, {"diff_line_no": 624, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 76, "value": "        return check_in_range(ver, range, session)\n"}, {"diff_line_no": 625, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 77, "value": ""}]}}}, "665e325990fb594fc2f9e7ac435d95e867484abf": {"branch": "master", "message": "add no cursor timeout for pymongo.find\n", "new_file": {}, "del_file": {}, "mod_file": {"incrementalimport/import_graph_from_mongodb.py": {"section_header": "graph_platform = crawl['npm']", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 25, "target_line_no": 25, "value": "\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 26, "target_line_no": 26, "value": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 27, "target_line_no": 27, "value": "    new_lib_vers = []\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 28, "target_line_no": null, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform})\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 28, "value": "    new_libs = graph_libs.find({'is_updated': True, 'platform': platform}, no_cursor_timeout = True)\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 29, "value": "    updated_libs = []\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 30, "value": "    updated_vers = []\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 31, "target_line_no": 31, "value": "    total_count = new_libs.count()\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 32, "target_line_no": 32, "value": "    count = 0\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 33, "target_line_no": null, "value": "    for lib in new_libs:\n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 33, "value": "    for lib in new_libs.batch_size(1):\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 34, "target_line_no": 34, "value": "        count += 1\n"}, {"diff_line_no": 24, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 35, "target_line_no": 35, "value": "        print(count, total_count, lib['library'])\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 36, "target_line_no": 36, "value": "        updated_libs.append("}]}}}, "ba981bd796c33bba173ee0dde2be9533622357f0": {"branch": "master", "message": "fix mongodb update\n", "new_file": {}, "del_file": {}, "mod_file": {"Config/configuration.ini": {"section_header": "DB = cvetriage", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "User = secbug\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "Password = fgyu7RE0\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 7, "value": "[Mongodb]\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 8, "target_line_no": null, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 9, "value": "Port = 27019\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "DB = test2\n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "DB = library-crawler\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 24, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 25, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "Host = 192.168.1.10\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 17, "value": "User = neo4j\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 18, "value": "Password = 1234\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 19, "value": "[InternalIP]\n"}, {"diff_line_no": 30, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 20, "target_line_no": null, "value": "IP = 192.168.1.20\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 32, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "IP = 192.168.1.10\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "incrementalimport/insert_graph_lib_vers_mongodb.py": {"section_header": "def insert_graph_library_version_for_npm(graph_update, graph_libraries, graph_ve", "modified_lines": [{"diff_line_no": 52, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 47, "target_line_no": 48, "value": "            graph_libraries.update_one({'library': lib, 'vendor': vendor, 'platform': platform},\n"}, {"diff_line_no": 53, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 48, "target_line_no": 49, "value": "                                       {'$set': {'sorted_versions': sorted_versions, 'dist_tags': dist_tags, 'is_updated': True}})\n"}, {"diff_line_no": 54, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 49, "target_line_no": 50, "value": "        else:\n"}, {"diff_line_no": 55, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 50, "target_line_no": null, "value": "            graph_libraries.insert_one({\n"}, {"diff_line_no": 56, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "            graph_libraries.insert({\n"}, {"diff_line_no": 57, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 51, "target_line_no": 52, "value": "                'library': lib,\n"}, {"diff_line_no": 58, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 52, "target_line_no": 53, "value": "                'vendor': vendor,\n"}, {"diff_line_no": 59, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 53, "target_line_no": 54, "value": "                'platform': platform,\n"}, {"diff_line_no": 60, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 54, "target_line_no": 55, "value": "                'sorted_versions': sorted_versions,\n"}, {"diff_line_no": 61, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 55, "target_line_no": 56, "value": "                'dist_tags': dist_tags,\n"}, {"diff_line_no": 62, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 56, "target_line_no": 57, "value": "                'is_updated': True\n"}, {"diff_line_no": 63, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 57, "target_line_no": null, "value": "            })\n"}, {"diff_line_no": 64, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "            }, check_keys=False)\n"}, {"diff_line_no": 65, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 58, "target_line_no": 59, "value": "    for libnamevendor, vernumlist in graph_update_platform['new_versions'].items():\n"}, {"diff_line_no": 66, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 59, "target_line_no": 60, "value": "        vendor = ''\n"}, {"diff_line_no": 67, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 60, "target_line_no": 61, "value": "        lib = libnamevendor\n"}]}, "incrementalimport/update_vul_info_to_graph.py": {"section_header": "def get_updated_vul_info(timestamp, platform):", "modified_lines": [{"diff_line_no": 73, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 87, "target_line_no": 87, "value": "\n"}, {"diff_line_no": 74, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 88, "target_line_no": 88, "value": "\n"}, {"diff_line_no": 75, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 89, "target_line_no": 89, "value": "def get_last_timestamp():\n"}, {"diff_line_no": 76, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 90, "target_line_no": null, "value": "    graph_update = crawl['graph_update']\n"}, {"diff_line_no": 77, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 90, "value": "    graph_update = crawl['graph_update_copy']\n"}, {"diff_line_no": 78, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 91, "target_line_no": 91, "value": "    issue_update = graph_update.find_one({'type': 'issue_update'})\n"}, {"diff_line_no": 79, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 92, "target_line_no": 92, "value": "    if issue_update:\n"}, {"diff_line_no": 80, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 93, "target_line_no": 93, "value": "        return issue_update['last_query_timestamp']\n"}, {"diff_line_no": 81, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 94, "target_line_no": 94, "value": "    else:\n"}, {"diff_line_no": 82, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 95, "target_line_no": null, "value": "        return datetime.datetime(2000, 1, 1)\n"}, {"diff_line_no": 83, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "        return datetime.datetime(2017, 7, 25)\n"}, {"diff_line_no": 84, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 96, "value": "\n"}, {"diff_line_no": 85, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 97, "value": "def reset_vul_timestamp():\n"}, {"diff_line_no": 86, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 98, "target_line_no": null, "value": "    graph_update = crawl['graph_update']\n"}, {"diff_line_no": 87, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    graph_update = crawl['graph_update_copy']\n"}, {"diff_line_no": 88, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 99, "target_line_no": 99, "value": "    if not graph_update.find_one({'type': 'issue_update'}):\n"}, {"diff_line_no": 89, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 100, "target_line_no": 100, "value": "        graph_update.insert({'type': 'issue_update', \n"}, {"diff_line_no": 90, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 101, "target_line_no": 101, "value": "                        'last_query_timestamp':  datetime.datetime.now()})"}]}}}, "b7494cfa12cdebd247abc5f6b00347d9f3f99366": {"branch": "master", "message": "fix some logic errors\n", "new_file": {}, "del_file": {}, "mod_file": {"Config/configuration.ini": {"section_header": "DB = cvetriage", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "User = secbug\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "Password = fgyu7RE0\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 7, "value": "[Mongodb]\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 8, "target_line_no": null, "value": "Host = 127.0.0.1\n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 9, "value": "Port = 27019\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 13, "target_line_no": 13, "value": "DB = test2\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "Host = localhost\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "Host = 192.168.1.20\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 17, "value": "User = neo4j\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 18, "target_line_no": null, "value": "Password = 1234\n"}, {"diff_line_no": 28, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 29, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "Password = 1234\n"}, {"diff_line_no": 30, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 19, "value": "[InternalIP]\n"}, {"diff_line_no": 31, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "IP = 192.168.1.20\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "incrementalimport/graph_operation/create_graph.py": {"section_header": "def delete_lower_upper_relationship(versionId1, versionId2):", "modified_lines": [{"diff_line_no": 253, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 134, "target_line_no": 210, "value": "        DELETE r''')\n"}, {"diff_line_no": 254, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 135, "target_line_no": 211, "value": "\n"}, {"diff_line_no": 255, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 136, "target_line_no": 212, "value": "\n"}, {"diff_line_no": 256, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 137, "target_line_no": null, "value": "def delete_lower_bound_relationship(verid1, verid2):\n"}, {"diff_line_no": 257, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 138, "target_line_no": null, "value": "    graph.run(f'''MATCH (:Version {{versionId: '{verid1}'}})-[r:LOWER_BOUND]->(:Version {{versionId: '{verid2}'}}) \n"}, {"diff_line_no": 258, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 139, "target_line_no": null, "value": "            DELETE r''')\n"}, {"diff_line_no": 259, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 140, "target_line_no": null, "value": "\n"}, {"diff_line_no": 260, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 141, "target_line_no": null, "value": "\n"}, {"diff_line_no": 261, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 142, "target_line_no": null, "value": "def delete_upper_bound_relationship(verid1, verid2):\n"}, {"diff_line_no": 262, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 143, "target_line_no": null, "value": "    graph.run(f'''MATCH (:Version {{versionId: '{verid1}'}})-[r:UPPER_BOUND]->(:Version {{versionId: '{verid2}'}}) \n"}, {"diff_line_no": 263, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 213, "value": "def delete_default_relationship(verid1, verid2):\n"}, {"diff_line_no": 264, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 214, "value": "    graph.run(f'''MATCH (:Version {{versionId: '{verid1}'}})-[r:DEFAULT]->(:Version {{versionId: '{verid2}'}}) \n"}, {"diff_line_no": 265, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 144, "target_line_no": 215, "value": "                DELETE r''')\n"}, {"diff_line_no": 266, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 145, "target_line_no": null, "value": "\n"}, {"diff_line_no": 267, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 146, "target_line_no": 216, "value": "# remove AFFECTS and update LIBAFFECTS accordingly\n"}, {"diff_line_no": 268, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 147, "target_line_no": 217, "value": "\n"}, {"diff_line_no": 269, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 148, "target_line_no": 218, "value": "\n"}]}, "incrementalimport/graph_operation/incremental_import.py": {"section_header": "def incremental_add(libvers):", "modified_lines": [{"diff_line_no": 381, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 184, "target_line_no": 164, "value": "                    sorted_version_list = versionlist\n"}, {"diff_line_no": 382, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 185, "target_line_no": 165, "value": "                else:\n"}, {"diff_line_no": 383, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 186, "target_line_no": 166, "value": "                    sorted_version_list = sorted(\n"}, {"diff_line_no": 384, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 187, "target_line_no": null, "value": "                        versionlist, key=functools.cmp_to_key(compare))\n"}, {"diff_line_no": 385, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 188, "target_line_no": null, "value": "                create_ver_ver_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 386, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 189, "target_line_no": null, "value": "                                            dependlib + ':' + sorted_version_list[0] + ':' + ver['vendor'] + ':' + ver['platform'], 'LOWER_BOUND')\n"}, {"diff_line_no": 387, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 167, "value": "                        versionlist, key=functools.cmp_to_key(is_greater_than))\n"}, {"diff_line_no": 388, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 190, "target_line_no": 168, "value": "                create_ver_ver_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 389, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 191, "target_line_no": null, "value": "                                            dependlib + ':' + sorted_version_list[-1] + ':' + ver['vendor'] + ':' + ver['platform'], 'UPPER_BOUND')\n"}, {"diff_line_no": 390, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 169, "value": "                                            dependlib + ':' + sorted_version_list[-1] + ':' + ver['vendor'] + ':' + ver['platform'], 'DEFAULT')\n"}, {"diff_line_no": 391, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 192, "target_line_no": 170, "value": "                create_ver_lib_relationship(ver['library'] + ':' + ver['version'] + ':' + ver['vendor'] + ':' + ver['platform'],\n"}, {"diff_line_no": 392, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 193, "target_line_no": 171, "value": "                                            dependlib + ':' + ver['vendor'] + ':' + ver['platform'], dependverlist, ver['dependencyrange'][dependlibvendor])\n"}, {"diff_line_no": 393, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 194, "target_line_no": 172, "value": "        for deplib in libdependslist:\n"}]}, "incrementalimport/import_graph_from_mongodb.py": {"section_header": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):", "modified_lines": [{"diff_line_no": 408, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 85, "target_line_no": 85, "value": "    create_library_id(new_lib_vers)\n"}, {"diff_line_no": 409, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 86, "target_line_no": 86, "value": "    for vers in new_lib_vers:\n"}, {"diff_line_no": 410, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 87, "target_line_no": 87, "value": "        create_version_id(vers['versions'])\n"}, {"diff_line_no": 411, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 88, "value": "    print('id created')\n"}, {"diff_line_no": 412, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 88, "target_line_no": 89, "value": "    incremental_add(new_lib_vers)\n"}, {"diff_line_no": 413, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 90, "value": "    print('incremental updated')\n"}, {"diff_line_no": 414, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 89, "target_line_no": 91, "value": "    # for clean all updated libs and vers status, comment this to keep test data from been deleted\n"}, {"diff_line_no": 415, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 90, "target_line_no": 92, "value": "    # for lib in updated_libs:\n"}, {"diff_line_no": 416, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 91, "target_line_no": 93, "value": "    #     graph_libraries.update_one(lib, {'$set': {'is_updated': False}})\n"}]}, "incrementalimport/insert_graph_lib_vers_mongodb.py": {"section_header": "def insert_graph_library_version_for_maven(graph_update, graph_libraries, graph_", "modified_lines": [{"diff_line_no": 440, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 105, "target_line_no": 107, "value": "def reset_graph_update(graph_update, platform_list):\n"}, {"diff_line_no": 441, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 106, "target_line_no": 108, "value": "    graph_update.update({'platform': {'$in': platform_list}}, {\n"}, {"diff_line_no": 442, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 107, "target_line_no": 109, "value": "                        '$set': {'new_libs': [], 'new_versions': {}}})\n"}, {"diff_line_no": 443, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 108, "target_line_no": null, "value": "    graph_update.update({'type': 'issue_update'}, {\n"}, {"diff_line_no": 444, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 109, "target_line_no": null, "value": "                        '$set': {'last_query_timestamp': datetime.datetime.now()}})\n"}, {"diff_line_no": 445, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 110, "target_line_no": 110, "value": "\n"}, {"diff_line_no": 446, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 111, "target_line_no": 111, "value": "\n"}, {"diff_line_no": 447, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 112, "target_line_no": 112, "value": "def insert_graph_library_version():\n"}, {"diff_line_no": 448, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 113, "target_line_no": 113, "value": "    insert_graph_library_version_for_npm(graph_update, graph_libraries, graph_versions, crawl)\n"}, {"diff_line_no": 449, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 114, "target_line_no": null, "value": "    #reset_graph_update(graph_update, ['NPM'])\n"}, {"diff_line_no": 450, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 114, "value": "    reset_graph_update(graph_update, ['NPM'])\n"}]}, "incrementalimport/update_vul_info_to_graph.py": {"section_header": "def get_last_timestamp():", "modified_lines": [{"diff_line_no": 456, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 94, "target_line_no": 94, "value": "    else:\n"}, {"diff_line_no": 457, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 95, "value": "        return datetime.datetime(2000, 1, 1)\n"}, {"diff_line_no": 458, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 96, "value": "\n"}, {"diff_line_no": 459, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 97, "value": "def reset_vul_timestamp():\n"}, {"diff_line_no": 460, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    graph_update = crawl['graph_update']\n"}, {"diff_line_no": 461, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "    if not graph_update.find_one({'type': 'issue_update'}):\n"}, {"diff_line_no": 462, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 100, "value": "        graph_update.insert({'type': 'issue_update', \n"}, {"diff_line_no": 463, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 101, "value": "                        'last_query_timestamp':  datetime.datetime.now()})\n"}, {"diff_line_no": 464, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 102, "value": "    else:\n"}, {"diff_line_no": 465, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 103, "value": "        graph_update.update({'type': 'issue_update'}, {\n"}, {"diff_line_no": 466, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 104, "value": "                        '$set': {'last_query_timestamp': datetime.datetime.now()}})\n"}, {"diff_line_no": 467, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 105, "value": "\n"}, {"diff_line_no": 468, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 106, "value": "def insert_remove_vul_to_graph():\n"}, {"diff_line_no": 469, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 98, "target_line_no": 107, "value": "    last = get_last_timestamp()\n"}, {"diff_line_no": 470, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 99, "target_line_no": 108, "value": "    get_updated_vul_info(last, 'NPM')\n"}, {"diff_line_no": 471, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 100, "target_line_no": 109, "value": "    # get_updated_vul_info(last, 'Pypi')\n"}, {"diff_line_no": 472, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 101, "target_line_no": 110, "value": "    # get_updated_vul_info(last, 'Maven')\n"}, {"diff_line_no": 473, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 102, "target_line_no": null, "value": "\n"}, {"diff_line_no": 474, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 111, "value": "    reset_vul_timestamp()\n"}, {"diff_line_no": 475, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 103, "target_line_no": 112, "value": "\n"}]}, "lib/database.py": {"section_header": "def get_neo4j_connection():", "modified_lines": [{"diff_line_no": 521, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 74, "target_line_no": 90, "value": "    except:\n"}, {"diff_line_no": 522, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 75, "target_line_no": 91, "value": "        print('No Mongo Database config found, will use defaults')\n"}, {"diff_line_no": 523, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 76, "target_line_no": 92, "value": "    connection = {\n"}, {"diff_line_no": 524, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "        'host': neo4j.get('Host', 'localhost'),\n"}, {"diff_line_no": 525, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 93, "value": "        'host':neo4j.get('Host', 'localhost'),\n"}, {"diff_line_no": 526, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 78, "target_line_no": 94, "value": "        'port': int(neo4j.get('Port', '7687')),\n"}, {"diff_line_no": 527, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 79, "target_line_no": 95, "value": "        'db': neo4j.get('DB', ''),\n"}, {"diff_line_no": 528, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 96, "value": "        'user': neo4j.get('User', 'neo4j'),\n"}, {"diff_line_no": 529, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 97, "value": "        'password': neo4j.get('Password', '1234')\n"}, {"diff_line_no": 530, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 82, "target_line_no": 98, "value": "    }\n"}, {"diff_line_no": 531, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 83, "target_line_no": null, "value": "    return DatabaseConnection(**connection)\n"}, {"diff_line_no": 532, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 533, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "    return DatabaseConnection(**connection)\n"}]}, "utils/useful_tools/format_js_api.py": {"section_header": "def sort_vers(versionlist):", "modified_lines": [{"diff_line_no": 578, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 36, "value": "\n"}, {"diff_line_no": 579, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 37, "value": "def check_in_range(ver, range):\n"}, {"diff_line_no": 580, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 31, "target_line_no": 38, "value": "    try:\n"}, {"diff_line_no": 581, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 32, "target_line_no": null, "value": "        res = session.get(f'http://localhost:8000/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 582, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "        session = requests.Session()\n"}, {"diff_line_no": 583, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "        res = session.get(f'http://{ip}:8000/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 584, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 33, "target_line_no": 41, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 585, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "        session.close()\n"}, {"diff_line_no": 586, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 34, "target_line_no": 43, "value": "        return res.content.decode() == 'true'\n"}, {"diff_line_no": 587, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 35, "target_line_no": 44, "value": "    except Exception as e:\n"}, {"diff_line_no": 588, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 36, "target_line_no": 45, "value": "        print(e)\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}}}, "b75e933e02609a4e4d31441a6ce2afc8ee72c3ff": {"branch": "master", "message": "Update readme.md", "new_file": {}, "del_file": {}, "mod_file": {"readme.md": {"section_header": "docker-compose -f local.yml build", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "docker-compose -f local.yml up\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "```\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "### 3. Then run the scripts one by one:\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "```python update_to_libvers_in_mongo.py```  \n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "```\n"}, {"diff_line_no": 17, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 14, "value": "python update_to_libvers_in_mongo.py\n"}, {"diff_line_no": 18, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "```  \n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 16, "value": "this step will parse graph_update table, and update graph_libraries and graph_versions table\n"}, {"diff_line_no": 20, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "```python update_libvers_to_graph.py```  \n"}, {"diff_line_no": 21, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 17, "value": "```\n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "python update_libvers_to_graph.py\n"}, {"diff_line_no": 23, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 19, "value": "```  \n"}, {"diff_line_no": 24, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 20, "value": "this step will parse graph_libraries and graph_versions table and insert, update the updated lib and vers to graph\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 17, "target_line_no": null, "value": "```python insert_remove_vul.py```  \n"}, {"diff_line_no": 26, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 21, "value": "```\n"}, {"diff_line_no": 27, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 22, "value": "python insert_remove_vul.py\n"}, {"diff_line_no": 28, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 23, "value": "```  \n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 24, "value": "this step will update and remove the changed vul info from graph"}]}}}, "e54585e3454c524a06b3ad616ee7eb437868cafb": {"branch": "master", "message": "Update readme.md", "new_file": {}, "del_file": {}, "mod_file": {"readme.md": {"section_header": "docker-compose -f local.yml build", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "docker-compose -f local.yml up\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "```\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "### 3. Then run the scripts one by one:\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "1. ```python update_to_libvers_in_mongo.py```  \n"}, {"diff_line_no": 16, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "```python update_to_libvers_in_mongo.py```  \n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "this step will parse graph_update table, and update graph_libraries and graph_versions table\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 15, "target_line_no": null, "value": "2. ```python update_libvers_to_graph.py```  \n"}, {"diff_line_no": 19, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "```python update_libvers_to_graph.py```  \n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "this step will parse graph_libraries and graph_versions table and insert, update the updated lib and vers to graph\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 17, "target_line_no": null, "value": "3. ```python insert_remove_vul.py```  \n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 17, "value": "```python insert_remove_vul.py```  \n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 18, "value": "this step will update and remove the changed vul info from graph"}]}}}, "7b8c592c49d7d84a166f5f2b3b81f69fc99a14ef": {"branch": "master", "message": "Update readme.md", "new_file": {}, "del_file": {}, "mod_file": {"readme.md": {"section_header": "", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 1, "target_line_no": null, "value": "#graph_pipeline\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 2, "target_line_no": null, "value": "##how to deploy\n"}, {"diff_line_no": 14, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 1, "value": "# graph_pipeline\n"}, {"diff_line_no": 15, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 2, "value": "## how to deploy\n"}, {"diff_line_no": 16, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 3, "target_line_no": 3, "value": "To run this pipeline locally, you should:  \n"}, {"diff_line_no": 17, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 4, "target_line_no": null, "value": "###1. download the data file from google drive  \n"}, {"diff_line_no": 18, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 4, "value": "### 1. download the data file from google drive  \n"}, {"diff_line_no": 19, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "data files url: https://drive.google.com/open?id=1_h2jfNsg6smvA4ZOpMInqDY5NjKkK-zn  \n"}, {"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "extract data to root, the data files are under ```/graph_pipeline/data/databases/graph_nodes.db``` \n"}, {"diff_line_no": 21, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 7, "target_line_no": null, "value": "###2.  run the following commands:\n"}, {"diff_line_no": 22, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 7, "value": "### 2.  run the following commands:\n"}, {"diff_line_no": 23, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 8, "target_line_no": 8, "value": "```\n"}, {"diff_line_no": 24, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 9, "value": "docker-compose -f local.yml build\n"}, {"diff_line_no": 25, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "docker-compose -f local.yml up\n"}, {"diff_line_no": 26, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "```\n"}, {"diff_line_no": 27, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 12, "target_line_no": null, "value": "###3. Then run the scripts one by one:\n"}, {"diff_line_no": 28, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 12, "value": "### 3. Then run the scripts one by one:\n"}, {"diff_line_no": 29, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 13, "target_line_no": 13, "value": "1. ```python update_to_libvers_in_mongo.py```  \n"}, {"diff_line_no": 30, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "this step will parse graph_update table, and update graph_libraries and graph_versions table\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 15, "value": "2. ```python update_libvers_to_graph.py```  \n"}, {"diff_line_no": 32, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "this step will parse graph_libraries and graph_versions table and insert, update the updated lib and vers to graph\n"}, {"diff_line_no": 33, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 17, "value": "3. ```python insert_remove_vul.py```  \n"}, {"diff_line_no": 34, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 18, "target_line_no": null, "value": "this step will update and remove the changed vul info from graph\n"}, {"diff_line_no": 35, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}, {"diff_line_no": 36, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "this step will update and remove the changed vul info from graph"}]}}}, "be9166ffc835d461151b067a20db1716aba29d63": {"branch": "master", "message": "add redme\n", "new_file": {}, "del_file": {}, "mod_file": {}}, "b3aefc38800d01525f5f108dc3d04571d8a56dd8": {"branch": "master", "message": "modified pipeline, can run locally\n", "new_file": {}, "del_file": {}, "mod_file": {".gitignore": {"section_header": "venv.bak/", "modified_lines": [{"diff_line_no": 20, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 101, "target_line_no": 102, "value": "\n"}, {"diff_line_no": 21, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 102, "target_line_no": 103, "value": "# mypy\n"}, {"diff_line_no": 22, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 103, "target_line_no": 104, "value": ".mypy_cache/\n"}, {"diff_line_no": 23, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 105, "value": "#graph_data files\n"}, {"diff_line_no": 24, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 106, "value": "data/\n"}]}, "Config/configuration.ini": {"section_header": "Port = 27019", "modified_lines": [{"diff_line_no": 30, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 10, "value": "User = root\n"}, {"diff_line_no": 31, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 11, "value": "Password = example\n"}, {"diff_line_no": 32, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 12, "value": "AuthSource = admin\n"}, {"diff_line_no": 33, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 13, "target_line_no": null, "value": "DB = library-crawler\n"}, {"diff_line_no": 34, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "DB = test2\n"}, {"diff_line_no": 35, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "[Neo4j]\n"}, {"diff_line_no": 36, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 15, "value": "Host = localhost\n"}, {"diff_line_no": 37, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": "Port = 7687\n"}]}, "compose/semver/Dockerfile": {"section_header": "", "modified_lines": [{"diff_line_no": 43, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 1, "target_line_no": 1, "value": "FROM node:9.8.0-alpine\n"}, {"diff_line_no": 44, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 2, "target_line_no": null, "value": "RUN mkdir -p /usr/src/app\n"}, {"diff_line_no": 45, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 3, "target_line_no": 2, "value": "WORKDIR /usr/src/app\n"}, {"diff_line_no": 46, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 4, "target_line_no": null, "value": "\n"}, {"diff_line_no": 47, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 5, "target_line_no": null, "value": "COPY ../../js /usr/src/app\n"}, {"diff_line_no": 48, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 3, "value": "COPY js/package*.json .\n"}, {"diff_line_no": 49, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 4, "value": "RUN npm install\n"}, {"diff_line_no": 50, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 7, "target_line_no": null, "value": "CMD node server.js\n"}, {"diff_line_no": 51, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 5, "value": "COPY js/server.js .\n"}, {"diff_line_no": 52, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 6, "value": "EXPOSE 8000\n"}, {"diff_line_no": 53, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 7, "value": "CMD [ \"node\", \"server.js\" ]\n"}]}, "incrementalimport/create_graph.py": {"section_header": "def delete_upper_bound_relationship(verid1, verid2):", "modified_lines": [{"diff_line_no": 70, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 150, "target_line_no": 149, "value": "def remove_vul_ver_relationship(vul_id, ver_id):\n"}, {"diff_line_no": 71, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 151, "target_line_no": 150, "value": "    ver = graph.run(\n"}, {"diff_line_no": 72, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 152, "target_line_no": 151, "value": "        f'''match (v:Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:AFFECTS]->(a: Version {{versionId: '{ver_id}'}}) delete r return a''').data()\n"}, {"diff_line_no": 73, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 152, "value": "    if not ver:\n"}, {"diff_line_no": 74, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 153, "value": "        print(f'No such AFFECTS relations:{vul_id} -> {ver_id}')\n"}, {"diff_line_no": 75, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 154, "value": "        return\n"}, {"diff_line_no": 76, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 153, "target_line_no": 155, "value": "    version = list(n['a'] for n in ver)[0]\n"}, {"diff_line_no": 77, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 154, "target_line_no": 156, "value": "    rels = graph.run(\n"}, {"diff_line_no": 78, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 155, "target_line_no": 157, "value": "        f'''match(v: Vulnerability {{vulnerabilityId: '{vul_id}'}})-[r:AFFECTS]->(a: Version {{library: '{version['library']}'}}) return r''').data()\n"}]}, "incrementalimport/import_graph_from_mongodb.py": {"section_header": "def add_new_lib_vers_to_graph(graph_libs, graph_vers, crawlerdb, platform):", "modified_lines": [{"diff_line_no": 203, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 87, "target_line_no": 92, "value": "    # for ver in updated_vers:\n"}, {"diff_line_no": 204, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 88, "target_line_no": 93, "value": "    #     graph_versions.update_one(ver, {'$set': {'is_updated': False}})\n"}, {"diff_line_no": 205, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 89, "target_line_no": 94, "value": "\n"}, {"diff_line_no": 206, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 90, "target_line_no": null, "value": "\n"}, {"diff_line_no": 207, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 91, "target_line_no": null, "value": "add_new_lib_vers_to_graph(graph_libraries, graph_versions, crawl, 'NPM')\n"}, {"diff_line_no": 208, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "def update_libvers_to_graph():\n"}, {"diff_line_no": 209, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 96, "value": "    add_new_lib_vers_to_graph(graph_libraries, graph_versions, crawl, 'NPM')\n"}, {"diff_line_no": 210, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 97, "value": "    # add_new_lib_vers_to_graph(graph_libraries, graph_versions, crawl, 'Pypi')\n"}, {"diff_line_no": 211, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    # add_new_lib_vers_to_graph(graph_libraries, graph_versions, crawl, 'Maven')\n"}]}, "incrementalimport/insert_graph_lib_vers_mongodb.py": {"section_header": "def reset_graph_update(graph_update, platform_list):", "modified_lines": [{"diff_line_no": 324, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 95, "target_line_no": 109, "value": "                        '$set': {'last_query_timestamp': datetime.datetime.now()}})\n"}, {"diff_line_no": 325, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 96, "target_line_no": 110, "value": "\n"}, {"diff_line_no": 326, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 97, "target_line_no": 111, "value": "\n"}, {"diff_line_no": 327, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 98, "target_line_no": null, "value": "insert_graph_library_version_for_npm(\n"}, {"diff_line_no": 328, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 99, "target_line_no": null, "value": "    graph_update, graph_libraries, graph_versions, crawl)\n"}, {"diff_line_no": 329, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 100, "target_line_no": null, "value": "reset_graph_update(graph_update, ['NPM'])\n"}, {"diff_line_no": 330, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 112, "value": "def insert_graph_library_version():\n"}, {"diff_line_no": 331, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 113, "value": "    insert_graph_library_version_for_npm(graph_update, graph_libraries, graph_versions, crawl)\n"}, {"diff_line_no": 332, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 114, "value": "    #reset_graph_update(graph_update, ['NPM'])\n"}]}, "incrementalimport/update_vul_info_to_graph.py": {"section_header": "def get_updated_vul_info(timestamp, platform):", "modified_lines": [{"diff_line_no": 379, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 67, "target_line_no": 80, "value": "            else:\n"}, {"diff_line_no": 380, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 68, "target_line_no": 81, "value": "                del_node[update[3]][update[1] + ':' + update[0]] = [update[2]]\n"}, {"diff_line_no": 381, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 69, "target_line_no": 82, "value": "        else:\n"}, {"diff_line_no": 382, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 70, "target_line_no": null, "value": "            del_node[update[3]] = {update[1] + ':' + update[0]: update[2]}\n"}, {"diff_line_no": 383, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "            del_node[update[3]] = {update[1] + ':' + update[0]: [update[2]]}\n"}, {"diff_line_no": 384, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 71, "target_line_no": 84, "value": "\n"}, {"diff_line_no": 385, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 72, "target_line_no": 85, "value": "    add_vul_node(add_node, platform)\n"}, {"diff_line_no": 386, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 73, "target_line_no": 86, "value": "    remove_vul_vers(del_node, platform)\n"}, {"diff_line_no": 387, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 74, "target_line_no": 87, "value": "\n"}, {"diff_line_no": 388, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 75, "target_line_no": 88, "value": "\n"}, {"diff_line_no": 389, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 76, "target_line_no": 89, "value": "def get_last_timestamp():\n"}, {"diff_line_no": 390, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 77, "target_line_no": null, "value": "    c = pymongo.MongoClient('localhost', username='root',\n"}, {"diff_line_no": 391, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "                            password='example', port=27019, authSource='admin')\n"}, {"diff_line_no": 392, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 79, "target_line_no": null, "value": "    crawl = c['library-crawler']\n"}, {"diff_line_no": 393, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 90, "value": "    graph_update = crawl['graph_update']\n"}, {"diff_line_no": 394, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 81, "target_line_no": null, "value": "    return graph_update.find_one({'type': 'issue_update'})['last_query_timestamp']\n"}, {"diff_line_no": 395, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 91, "value": "    issue_update = graph_update.find_one({'type': 'issue_update'})\n"}, {"diff_line_no": 396, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 92, "value": "    if issue_update:\n"}, {"diff_line_no": 397, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 93, "value": "        return issue_update['last_query_timestamp']\n"}, {"diff_line_no": 398, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 94, "value": "    else:\n"}, {"diff_line_no": 399, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 95, "value": "        return datetime.datetime(2000, 1, 1)\n"}, {"diff_line_no": 400, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 96, "value": "\n"}, {"diff_line_no": 401, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 97, "value": "def insert_remove_vul_to_graph():\n"}, {"diff_line_no": 402, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 98, "value": "    last = get_last_timestamp()\n"}, {"diff_line_no": 403, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 99, "value": "    get_updated_vul_info(last, 'NPM')\n"}, {"diff_line_no": 404, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 100, "value": "    # get_updated_vul_info(last, 'Pypi')\n"}, {"diff_line_no": 405, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 101, "value": "    # get_updated_vul_info(last, 'Maven')\n"}, {"diff_line_no": 406, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 82, "target_line_no": 102, "value": "\n"}, {"diff_line_no": 407, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 83, "target_line_no": 103, "value": "\n"}, {"diff_line_no": 408, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 84, "target_line_no": null, "value": "last = get_last_timestamp()\n"}, {"diff_line_no": 409, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 85, "target_line_no": null, "value": "get_updated_vul_info(last, 'NPM')\n"}]}, "incrementalimport/version_tools.py": {"section_header": "", "modified_lines": [{"diff_line_no": 415, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 1, "target_line_no": 1, "value": "from utils.version_util.models import SemanticVersion\n"}, {"diff_line_no": 416, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 2, "target_line_no": null, "value": "\n"}, {"diff_line_no": 417, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 3, "target_line_no": null, "value": "\n"}, {"diff_line_no": 418, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 2, "value": "from utils.useful_tools.format_js_api import sort_vers, check_range_type\n"}, {"diff_line_no": 419, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 3, "value": "from utils.version_util.clean_dep import get_clean_range_from_url\n"}, {"diff_line_no": 420, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 4, "target_line_no": 4, "value": "def get_version_details(version):\n"}, {"diff_line_no": 421, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 5, "value": "    sv = SemanticVersion(version)\n"}, {"diff_line_no": 422, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 6, "value": "    return (sv.major, sv.minor, sv.patch, sv.pre_release, sv.pre_release_num)\n"}, {"diff_line_no": 423, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 7, "value": "\n"}, {"diff_line_no": 424, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 8, "value": "\n"}, {"diff_line_no": 425, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 9, "value": "def get_sorted_all_version(collection, library, vendor, platform):\n"}, {"diff_line_no": 426, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 10, "value": "    if platform == 'NPM':\n"}, {"diff_line_no": 427, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 11, "value": "        lib = collection.find_one({'requested_name': library})\n"}, {"diff_line_no": 428, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 12, "value": "        sorted_versions = []\n"}, {"diff_line_no": 429, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 13, "value": "        if 'versions' in lib and lib['versions']:\n"}, {"diff_line_no": 430, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 14, "value": "            sorted_versions = sort_vers(list(lib['versions'].keys()))\n"}, {"diff_line_no": 431, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 15, "value": "        return sorted_versions\n"}, {"diff_line_no": 432, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 16, "value": "    if platform == 'Maven':\n"}, {"diff_line_no": 433, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 17, "value": "        pass\n"}, {"diff_line_no": 434, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "    if platform == 'Pypi':\n"}, {"diff_line_no": 435, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 19, "value": "        pass\n"}, {"diff_line_no": 436, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 20, "value": "    return []\n"}, {"diff_line_no": 437, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 21, "value": "# the way to sort version numbers for different platforms differs, so implement them seperately\n"}, {"diff_line_no": 438, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 22, "value": "def sort_versions(vers, platform):\n"}, {"diff_line_no": 439, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 23, "value": "    if platform == 'NPM':\n"}, {"diff_line_no": 440, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 24, "value": "        sorted_versions = sort_vers(vers)\n"}, {"diff_line_no": 441, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 25, "value": "        return sorted_versions\n"}, {"diff_line_no": 442, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 26, "value": "    if platform == 'Maven':\n"}, {"diff_line_no": 443, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "        pass\n"}, {"diff_line_no": 444, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 28, "value": "    if platform == 'Pypi':\n"}, {"diff_line_no": 445, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 29, "value": "        pass\n"}, {"diff_line_no": 446, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 30, "value": "    return []\n"}, {"diff_line_no": 447, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 31, "value": "\n"}, {"diff_line_no": 448, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "# the way to parse ranges for different platforms differs, so implement them seperately\n"}, {"diff_line_no": 449, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 33, "value": "def parse_dep_range(lib, dep, vendor, collection, platform):\n"}, {"diff_line_no": 450, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 34, "value": "    if platform == 'NPM':\n"}, {"diff_line_no": 451, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 35, "value": "        return parse_dep_range_npm(lib, dep, collection)\n"}, {"diff_line_no": 452, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 36, "value": "    elif platform == 'Pypi':\n"}, {"diff_line_no": 453, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 37, "value": "        return parse_dep_range_pypi(lib, dep, collection)\n"}, {"diff_line_no": 454, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 38, "value": "    elif platform == 'Maven':\n"}, {"diff_line_no": 455, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 39, "value": "        return parse_dep_range_maven(lib, dep, collection)\n"}, {"diff_line_no": 456, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 40, "value": "\n"}, {"diff_line_no": 457, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 41, "value": "\n"}, {"diff_line_no": 458, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 42, "value": "def parse_dep_range_pypi(lib,dep, collection):\n"}, {"diff_line_no": 459, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 43, "value": "    pass\n"}, {"diff_line_no": 460, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 44, "value": "    #todo\n"}, {"diff_line_no": 461, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 45, "value": "def parse_dep_range_maven(lib,dep, collection):\n"}, {"diff_line_no": 462, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 46, "value": "    pass\n"}, {"diff_line_no": 463, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 47, "value": "    #todo\n"}, {"diff_line_no": 464, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 48, "value": "def parse_dep_range_npm(lib,dep, collection):\n"}, {"diff_line_no": 465, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 49, "value": "    dep_type = check_range_type(lib, dep)\n"}, {"diff_line_no": 466, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 50, "value": "    lib_object = collection.find_one({'requested_name': lib})\n"}, {"diff_line_no": 467, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 51, "value": "    ret_range = ''\n"}, {"diff_line_no": 468, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 52, "value": "    if dep_type == 'tag' and dep in lib_object['dist-tags']:\n"}, {"diff_line_no": 469, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 53, "value": "        ret_range = lib_object['dist-tags'][dep]\n"}, {"diff_line_no": 470, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 54, "value": "    elif dep_type in ['git', 'remote']:\n"}, {"diff_line_no": 471, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 55, "value": "        res = get_clean_range_from_url(lib, dep)\n"}, {"diff_line_no": 472, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 56, "value": "        if res not in ['INVALID_URL', 'URL_NOT_FOUND', 'URL_VER_NOT_FOUND']:\n"}, {"diff_line_no": 473, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 57, "value": "            ret_range = res\n"}, {"diff_line_no": 474, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 58, "value": "    elif dep_type in ['version', 'range']:\n"}, {"diff_line_no": 475, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 59, "value": "        ret_range = dep\n"}, {"diff_line_no": 476, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 60, "value": "    else:\n"}, {"diff_line_no": 477, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 61, "value": "        ret_range = 'EMPTY_OR_INVALID'\n"}, {"diff_line_no": 478, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 62, "value": "    return ret_range\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}, "js/server.js": {"section_header": "var server=http.createServer(function(req,res){", "modified_lines": [{"diff_line_no": 495, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 80, "value": "   });\n"}, {"diff_line_no": 496, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 81, "value": "})\n"}, {"diff_line_no": 497, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 82, "target_line_no": 82, "value": "//\u76d1\u542c\u8fd9\u4e2a\u7aef\u53e3\n"}, {"diff_line_no": 498, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 83, "target_line_no": null, "value": "server.listen(8080,function(){\n"}, {"diff_line_no": 499, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 83, "value": "server.listen(8000,function(){\n"}, {"diff_line_no": 500, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 84, "target_line_no": 84, "value": "   console.log(\"\u670d\u52a1\u5df2\u542f\u52a8\")\n"}, {"diff_line_no": 501, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 85, "target_line_no": 85, "value": "})\n"}]}, "lib/database.py": {"section_header": "def get_neo4j_connection():", "modified_lines": [{"diff_line_no": 516, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 75, "target_line_no": 75, "value": "        print('No Mongo Database config found, will use defaults')\n"}, {"diff_line_no": 517, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 76, "target_line_no": 76, "value": "    connection = {\n"}, {"diff_line_no": 518, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 77, "target_line_no": 77, "value": "        'host': neo4j.get('Host', 'localhost'),\n"}, {"diff_line_no": 519, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 78, "target_line_no": null, "value": "        'port': neo4j.get('Port', '7687'),\n"}, {"diff_line_no": 520, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 78, "value": "        'port': int(neo4j.get('Port', '7687')),\n"}, {"diff_line_no": 521, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 79, "target_line_no": 79, "value": "        'db': neo4j.get('DB', ''),\n"}, {"diff_line_no": 522, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 80, "target_line_no": 80, "value": "        'user': neo4j.get('User', 'neo4j'),\n"}, {"diff_line_no": 523, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 81, "target_line_no": 81, "value": "        'password': neo4j.get('Password', '1234')\n"}]}, "local_p5.yml": {"section_header": "services:", "modified_lines": [{"diff_line_no": 541, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 24, "target_line_no": 24, "value": "            - NEO4J_dbms_memory_heap_initial__size=8G\n"}, {"diff_line_no": 542, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 25, "target_line_no": 25, "value": "            - NEO4J_dbms_memory_heap_max__size=8G\n"}, {"diff_line_no": 543, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 26, "target_line_no": 26, "value": "            - NEO4J_dbms_memory_pagecache_size=4G\n"}, {"diff_line_no": 544, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 27, "target_line_no": null, "value": "            - NEO4J_dbms_active__database=graph_nodes.db\n"}, {"diff_line_no": 545, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 27, "value": "            - NEO4J_dbms_active__database=graph_nodes_test.db\n"}, {"diff_line_no": 546, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 28, "target_line_no": 28, "value": "            - NEO4J_apoc_export_file_enabled=true\n"}, {"diff_line_no": 547, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 29, "value": "            - NEO4J_apoc_import_file_enabled=true\n"}, {"diff_line_no": 548, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 30, "value": "            - NEO4J_apoc_import_file_use__neo4j__config=true\n"}]}, "requirements.txt": {"section_header": "colorama==0.4.1", "modified_lines": [{"diff_line_no": 560, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 5, "target_line_no": 7, "value": "idna==2.8\n"}, {"diff_line_no": 561, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 6, "target_line_no": 8, "value": "neobolt==1.7.13\n"}, {"diff_line_no": 562, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 7, "target_line_no": 9, "value": "neotime==1.7.4\n"}, {"diff_line_no": 563, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 10, "value": "numpy==1.17.0\n"}, {"diff_line_no": 564, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 8, "target_line_no": 11, "value": "packaging==19.0\n"}, {"diff_line_no": 565, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 12, "value": "pandas==0.25.0\n"}, {"diff_line_no": 566, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 9, "target_line_no": 13, "value": "prompt-toolkit==2.0.9\n"}, {"diff_line_no": 567, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 14, "value": "psycopg2-binary==2.8.3\n"}, {"diff_line_no": 568, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 10, "target_line_no": 15, "value": "py2neo==4.3.0\n"}, {"diff_line_no": 569, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 11, "target_line_no": 16, "value": "Pygments==2.3.1\n"}, {"diff_line_no": 570, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 12, "target_line_no": 17, "value": "pymongo==3.8.0\n"}, {"diff_line_no": 571, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 18, "value": "pyparsing==2.4.2\n"}, {"diff_line_no": 572, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 19, "value": "python-dateutil==2.8.0\n"}, {"diff_line_no": 573, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 13, "target_line_no": 20, "value": "pytz==2019.1\n"}, {"diff_line_no": 574, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 21, "value": "requests==2.22.0\n"}, {"diff_line_no": 575, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 22, "value": "semantic-version==2.6.0\n"}, {"diff_line_no": 576, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 23, "value": "six==1.12.0\n"}, {"diff_line_no": 577, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 24, "value": "soupsieve==1.9.2\n"}, {"diff_line_no": 578, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 17, "target_line_no": 25, "value": "SQLAlchemy==1.3.6\n"}, {"diff_line_no": 579, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 26, "value": "urllib3==1.24.3\n"}, {"diff_line_no": 580, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 27, "value": "wcwidth==0.1.7\n"}]}, "utils/useful_tools/format_js_api.py": {"section_header": "def sort_vers(versionlist):", "modified_lines": [{"diff_line_no": 636, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 29, "target_line_no": 29, "value": "\n"}, {"diff_line_no": 637, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 30, "target_line_no": 30, "value": "def check_in_range(ver, range):\n"}, {"diff_line_no": 638, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 31, "target_line_no": 31, "value": "    try:\n"}, {"diff_line_no": 639, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 32, "target_line_no": null, "value": "        res = requests.get(f'http://localhost:8080/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 640, "is_added": true, "is_contect": false, "is_removed": false, "line_type": "+", "source_line_no": null, "target_line_no": 32, "value": "        res = session.get(f'http://localhost:8000/inrange?version={ver}&range={range}'.replace( '+', '%2B'))\n"}, {"diff_line_no": 641, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 33, "target_line_no": 33, "value": "        res.raise_for_status()\n"}, {"diff_line_no": 642, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 34, "target_line_no": null, "value": "        print(res.content.decode())\n"}, {"diff_line_no": 643, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 35, "target_line_no": 34, "value": "        return res.content.decode() == 'true'\n"}, {"diff_line_no": 644, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 36, "target_line_no": 35, "value": "    except Exception as e:\n"}, {"diff_line_no": 645, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 37, "target_line_no": 36, "value": "        print(e)\n"}, {"diff_line_no": null, "is_added": false, "is_contect": false, "is_removed": false, "line_type": "\\", "source_line_no": null, "target_line_no": null, "value": " No newline at end of file\n"}]}}}, "1a9099f03eceb0b44594075c90c617aa72c61bfc": {"branch": "master", "message": "init\n", "new_file": {}, "del_file": {}, "mod_file": {".gitignore": {"section_header": "dist/", "modified_lines": [{"diff_line_no": 12, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 14, "target_line_no": 14, "value": "downloads/\n"}, {"diff_line_no": 13, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 15, "target_line_no": 15, "value": "eggs/\n"}, {"diff_line_no": 14, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 16, "target_line_no": 16, "value": ".eggs/\n"}, {"diff_line_no": 15, "is_added": false, "is_contect": false, "is_removed": true, "line_type": "-", "source_line_no": 17, "target_line_no": null, "value": "lib/\n"}, {"diff_line_no": 16, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 18, "target_line_no": 17, "value": "lib64/\n"}, {"diff_line_no": 17, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 19, "target_line_no": 18, "value": "parts/\n"}, {"diff_line_no": 18, "is_added": false, "is_contect": true, "is_removed": false, "line_type": " ", "source_line_no": 20, "target_line_no": 19, "value": "sdist/\n"}]}}}, "ce3f94d3e53e7ed5b9ee5e81a7861963dfbb1ce1": {"branch": "master", "message": "Initial commit", "new_file": {}, "del_file": {}, "mod_file": {}}}